<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:3348/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Elizabeth Obst">
<meta name="dcterms.date" content="2025-12-14">

<title>UT Faculty Scheduling: Predicting Staffing Preferences</title>
<style class="anchorjs"></style><style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="./Faculty Scheduling Predicting Staffing Preferences_files/clipboard.min.js.download"></script>
<script src="./Faculty Scheduling Predicting Staffing Preferences_files/quarto.js.download" type="module"></script>
<script src="./Faculty Scheduling Predicting Staffing Preferences_files/tabsets.js.download" type="module"></script>
<script src="./Faculty Scheduling Predicting Staffing Preferences_files/popper.min.js.download"></script>
<script src="./Faculty Scheduling Predicting Staffing Preferences_files/tippy.umd.min.js.download"></script>
<script src="./Faculty Scheduling Predicting Staffing Preferences_files/anchor.min.js.download"></script>
<link href="./Faculty Scheduling Predicting Staffing Preferences_files/tippy.css" rel="stylesheet">
<link href="./Faculty Scheduling Predicting Staffing Preferences_files/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="./Faculty Scheduling Predicting Staffing Preferences_files/bootstrap.min.js.download"></script>
<link href="./Faculty Scheduling Predicting Staffing Preferences_files/bootstrap-icons.css" rel="stylesheet">
<link href="./Faculty Scheduling Predicting Staffing Preferences_files/bootstrap-6e5ff12f349f7d7ee99023e5a7f49be9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


<style>.ansi-display{font-family:monospace;white-space:pre-wrap;--ansiBlack: #000000;--ansiRed: #cd3131;--ansiGreen: #00BC00;--ansiYellow: #949800;--ansiBlue: #0451a5;--ansiMagenta: #bc05bc;--ansiCyan: #0598bc;--ansiWhite: #555555;--ansiBrightBlack: #666666;--ansiBrightRed: #cd3131;--ansiBrightGreen: #14CE14;--ansiBrightYellow: #b5ba00;--ansiBrightBlue: #0451a5;--ansiBrightMagenta: #bc05bc;--ansiBrightCyan: #0598bc;--ansiBrightWhite: #a5a5a5}.dark-mode .ansi-display{--ansiBlack: #000000;--ansiRed: #cd3131;--ansiGreen: #0DBC79;--ansiYellow: #e5e510;--ansiBlue: #2472c8;--ansiMagenta: #bc3fbc;--ansiCyan: #11a8cd;--ansiWhite: #e5e5e5;--ansiBrightBlack: #666666;--ansiBrightRed: #f14c4c;--ansiBrightGreen: #23d18b;--ansiBrightYellow: #f5f543;--ansiBrightBlue: #3b8eea;--ansiBrightMagenta: #d670d6;--ansiBrightCyan: #29b8db;--ansiBrightWhite: #e5e5e5}@keyframes ansi-displaly-run-blink{50%{opacity:0}}.fui-FluentProvider h2{border-bottom:none;padding-bottom:0}</style><style data-make-styles-bucket="d" data-priority="0"></style><style id="fui-FluentProviderr0"></style></head>

<body class="quarto-light" data-tabster="{&quot;root&quot;:{}}">

<i tabindex="-1" role="none" data-tabster-dummy="" aria-hidden="true" style="position: fixed; height: 1px; width: 1px; opacity: 0.001; z-index: -1; content-visibility: hidden; top: 0px; left: 0px;"></i><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="http://localhost:3348/#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="http://localhost:3348/#data-loading-and-preprocessing" id="toc-data-loading-and-preprocessing" class="nav-link" data-scroll-target="#data-loading-and-preprocessing">Data Loading and Preprocessing</a></li>
  <li><a href="http://localhost:3348/#exploratory-data-analysis" id="toc-exploratory-data-analysis" class="nav-link" data-scroll-target="#exploratory-data-analysis">Exploratory Data Analysis</a>
  <ul class="collapse">
  <li><a href="http://localhost:3348/#staffing-type-distribution" id="toc-staffing-type-distribution" class="nav-link" data-scroll-target="#staffing-type-distribution">Staffing Type Distribution</a></li>
  <li><a href="http://localhost:3348/#team-size-distribution" id="toc-team-size-distribution" class="nav-link" data-scroll-target="#team-size-distribution">Team Size Distribution</a></li>
  <li><a href="http://localhost:3348/#faculty-level-analysis" id="toc-faculty-level-analysis" class="nav-link" data-scroll-target="#faculty-level-analysis">Faculty-Level Analysis</a></li>
  <li><a href="http://localhost:3348/#temporal-patterns" id="toc-temporal-patterns" class="nav-link" data-scroll-target="#temporal-patterns">Temporal Patterns</a></li>
  <li><a href="http://localhost:3348/#most-frequently-scheduled-staff" id="toc-most-frequently-scheduled-staff" class="nav-link" data-scroll-target="#most-frequently-scheduled-staff">Most Frequently Scheduled Staff</a></li>
  <li><a href="http://localhost:3348/#availability-vs-team-size" id="toc-availability-vs-team-size" class="nav-link" data-scroll-target="#availability-vs-team-size">Availability vs Team Size</a></li>
  </ul></li>
  <li><a href="http://localhost:3348/#hypothesis-testing" id="toc-hypothesis-testing" class="nav-link" data-scroll-target="#hypothesis-testing">Hypothesis Testing</a>
  <ul class="collapse">
  <li><a href="http://localhost:3348/#test-1-chi-square-test-for-staffing-type-and-weekday" id="toc-test-1-chi-square-test-for-staffing-type-and-weekday" class="nav-link" data-scroll-target="#test-1-chi-square-test-for-staffing-type-and-weekday">Test 1: Chi-square test for staffing type and weekday</a></li>
  <li><a href="http://localhost:3348/#test-2-correlation-between-room-count-and-team-size" id="toc-test-2-correlation-between-room-count-and-team-size" class="nav-link" data-scroll-target="#test-2-correlation-between-room-count-and-team-size">Test 2: Correlation between room count and team size</a></li>
  <li><a href="http://localhost:3348/#test-3-t-test-comparing-team-sizes-on-holidays-vs-non-holidays" id="toc-test-3-t-test-comparing-team-sizes-on-holidays-vs-non-holidays" class="nav-link" data-scroll-target="#test-3-t-test-comparing-team-sizes-on-holidays-vs-non-holidays">Test 3: T-test comparing team sizes on holidays vs non-holidays</a></li>
  </ul></li>
  <li><a href="http://localhost:3348/#feature-engineering" id="toc-feature-engineering" class="nav-link" data-scroll-target="#feature-engineering">Feature Engineering</a></li>
  <li><a href="http://localhost:3348/#modeling" id="toc-modeling" class="nav-link" data-scroll-target="#modeling">Modeling</a>
  <ul class="collapse">
  <li><a href="http://localhost:3348/#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">Data Preparation</a></li>
  <li><a href="http://localhost:3348/#staffing-type-preference-model" id="toc-staffing-type-preference-model" class="nav-link" data-scroll-target="#staffing-type-preference-model">Staffing Type Preference Model</a>
  <ul class="collapse">
  <li><a href="http://localhost:3348/#multinomial-logistic-regression" id="toc-multinomial-logistic-regression" class="nav-link" data-scroll-target="#multinomial-logistic-regression">Multinomial Logistic Regression</a></li>
  <li><a href="http://localhost:3348/#linear-discriminant-analysis" id="toc-linear-discriminant-analysis" class="nav-link" data-scroll-target="#linear-discriminant-analysis">Linear Discriminant Analysis</a></li>
  <li><a href="http://localhost:3348/#support-vector-machine" id="toc-support-vector-machine" class="nav-link" data-scroll-target="#support-vector-machine">Support Vector Machine</a></li>
  <li><a href="http://localhost:3348/#staffing-type-model-comparison" id="toc-staffing-type-model-comparison" class="nav-link" data-scroll-target="#staffing-type-model-comparison">Staffing Type Model Comparison</a></li>
  </ul></li>
  <li><a href="http://localhost:3348/#team-size-preference-model" id="toc-team-size-preference-model" class="nav-link" data-scroll-target="#team-size-preference-model">Team Size Preference Model</a>
  <ul class="collapse">
  <li><a href="http://localhost:3348/#multinomial-logistic-regression-1" id="toc-multinomial-logistic-regression-1" class="nav-link" data-scroll-target="#multinomial-logistic-regression-1">Multinomial Logistic Regression</a></li>
  <li><a href="http://localhost:3348/#linear-discriminant-analysis-1" id="toc-linear-discriminant-analysis-1" class="nav-link" data-scroll-target="#linear-discriminant-analysis-1">Linear Discriminant Analysis</a></li>
  <li><a href="http://localhost:3348/#support-vector-machine-1" id="toc-support-vector-machine-1" class="nav-link" data-scroll-target="#support-vector-machine-1">Support Vector Machine</a></li>
  <li><a href="http://localhost:3348/#team-size-model-comparison" id="toc-team-size-model-comparison" class="nav-link" data-scroll-target="#team-size-model-comparison">Team Size Model Comparison</a></li>
  </ul></li>
  <li><a href="http://localhost:3348/#specific-staff-preference-model" id="toc-specific-staff-preference-model" class="nav-link" data-scroll-target="#specific-staff-preference-model">Specific Staff Preference Model</a>
  <ul class="collapse">
  <li><a href="http://localhost:3348/#multi-label-classification-results" id="toc-multi-label-classification-results" class="nav-link" data-scroll-target="#multi-label-classification-results">Multi-label Classification Results</a></li>
  <li><a href="http://localhost:3348/#staff-preference-model-discussion" id="toc-staff-preference-model-discussion" class="nav-link" data-scroll-target="#staff-preference-model-discussion">Staff Preference Model Discussion</a></li>
  </ul></li>
  <li><a href="http://localhost:3348/#faculty-crna-pairing-analysis" id="toc-faculty-crna-pairing-analysis" class="nav-link" data-scroll-target="#faculty-crna-pairing-analysis">Faculty-CRNA Pairing Analysis</a></li>
  </ul></li>
  <li><a href="http://localhost:3348/#summary-and-recommendations" id="toc-summary-and-recommendations" class="nav-link" data-scroll-target="#summary-and-recommendations">Summary and Recommendations</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">UT Faculty Scheduling: Predicting Staffing Preferences</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Elizabeth Obst </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 14, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="http://localhost:3348/#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load libraries</span></span>
<span id="cb1-2"><a href="http://localhost:3348/#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="http://localhost:3348/#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-4"><a href="http://localhost:3348/#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb1-5"><a href="http://localhost:3348/#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb1-6"><a href="http://localhost:3348/#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(e1071)</span>
<span id="cb1-7"><a href="http://localhost:3348/#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nnet)</span>
<span id="cb1-8"><a href="http://localhost:3348/#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-9"><a href="http://localhost:3348/#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-10"><a href="http://localhost:3348/#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb1-11"><a href="http://localhost:3348/#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-12"><a href="http://localhost:3348/#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glmnet)</span>
<span id="cb1-13"><a href="http://localhost:3348/#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="http://localhost:3348/#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb1-15"><a href="http://localhost:3348/#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="http://localhost:3348/#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>The University of Texas anesthesiology department manages a complex scheduling system coordinating attending physicians (faculty), Certified Registered Nurse Anesthetists (CRNAs), and anesthesia residents across multiple operating rooms and shifts. This analysis aims to understand faculty preferences for team composition and specific staff members.</p>
<p><strong>Research Questions:</strong></p>
<ol type="1">
<li>What are each faculty member’s staffing type preferences (CRNAs only, residents only, or mixed)?</li>
<li>What are the team size preferences for each faculty member?</li>
<li>Which specific CRNAs or residents does each faculty prefer to work with?</li>
</ol>
</section>
<section id="data-loading-and-preprocessing" class="level1">
<h1>Data Loading and Preprocessing</h1>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="http://localhost:3348/#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read the data</span></span>
<span id="cb2-2"><a href="http://localhost:3348/#cb2-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"UT_Faculty_Scheduling_Anon.csv"</span>, <span class="at">blank.lines.skip =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-3"><a href="http://localhost:3348/#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="http://localhost:3348/#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># convert date</span></span>
<span id="cb2-5"><a href="http://localhost:3348/#cb2-5" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(data<span class="sc">$</span>Date, <span class="at">format =</span> <span class="st">"%m/%d/%y"</span>)</span>
<span id="cb2-6"><a href="http://localhost:3348/#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="http://localhost:3348/#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># remove blank rows</span></span>
<span id="cb2-8"><a href="http://localhost:3348/#cb2-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Faculty) <span class="sc">&amp;</span> Faculty <span class="sc">!=</span> <span class="st">""</span>)</span>
<span id="cb2-9"><a href="http://localhost:3348/#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="http://localhost:3348/#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># basic info</span></span>
<span id="cb2-11"><a href="http://localhost:3348/#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Total records:"</span>, <span class="fu">nrow</span>(data), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Total records: 2924 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="http://localhost:3348/#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Date range:"</span>, <span class="fu">as.character</span>(<span class="fu">min</span>(data<span class="sc">$</span>Date, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)), <span class="st">"to"</span>, </span>
<span id="cb4-2"><a href="http://localhost:3348/#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>(<span class="fu">max</span>(data<span class="sc">$</span>Date, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Date range: 2024-08-05 to 2025-08-27 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="http://localhost:3348/#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Number of unique faculty:"</span>, <span class="fu">n_distinct</span>(data<span class="sc">$</span>Faculty), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Number of unique faculty: 53 </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="http://localhost:3348/#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># identify CRNA and Resident columns</span></span>
<span id="cb8-2"><a href="http://localhost:3348/#cb8-2" aria-hidden="true" tabindex="-1"></a>crna_cols <span class="ot">&lt;-</span> <span class="fu">names</span>(data)[<span class="fu">grepl</span>(<span class="st">"^CRNA_"</span>, <span class="fu">names</span>(data))]</span>
<span id="cb8-3"><a href="http://localhost:3348/#cb8-3" aria-hidden="true" tabindex="-1"></a>resident_cols <span class="ot">&lt;-</span> <span class="fu">names</span>(data)[<span class="fu">grepl</span>(<span class="st">"^Resident_"</span>, <span class="fu">names</span>(data))]</span>
<span id="cb8-4"><a href="http://localhost:3348/#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="http://localhost:3348/#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Number of CRNA columns:"</span>, <span class="fu">length</span>(crna_cols), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Number of CRNA columns: 82 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="http://localhost:3348/#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Number of Resident columns:"</span>, <span class="fu">length</span>(resident_cols), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Number of Resident columns: 87 </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="http://localhost:3348/#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># count CRNAs and Residents per shift first</span></span>
<span id="cb12-2"><a href="http://localhost:3348/#cb12-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>CRNA_Count <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(data[, crna_cols] <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-3"><a href="http://localhost:3348/#cb12-3" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>Resident_Count <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(data[, resident_cols] <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-4"><a href="http://localhost:3348/#cb12-4" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>Total_Team_Size <span class="ot">&lt;-</span> data<span class="sc">$</span>CRNA_Count <span class="sc">+</span> data<span class="sc">$</span>Resident_Count</span>
<span id="cb12-5"><a href="http://localhost:3348/#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="http://localhost:3348/#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># create staffing variables</span></span>
<span id="cb12-7"><a href="http://localhost:3348/#cb12-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="http://localhost:3348/#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-9"><a href="http://localhost:3348/#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create staffing type</span></span>
<span id="cb12-10"><a href="http://localhost:3348/#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Staffing_Type =</span> <span class="fu">case_when</span>(</span>
<span id="cb12-11"><a href="http://localhost:3348/#cb12-11" aria-hidden="true" tabindex="-1"></a>      CRNA_Count <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> Resident_Count <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"CRNA_Only"</span>,</span>
<span id="cb12-12"><a href="http://localhost:3348/#cb12-12" aria-hidden="true" tabindex="-1"></a>      Resident_Count <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> CRNA_Count <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Resident_Only"</span>,</span>
<span id="cb12-13"><a href="http://localhost:3348/#cb12-13" aria-hidden="true" tabindex="-1"></a>      CRNA_Count <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> Resident_Count <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Mixed"</span>,</span>
<span id="cb12-14"><a href="http://localhost:3348/#cb12-14" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"None"</span></span>
<span id="cb12-15"><a href="http://localhost:3348/#cb12-15" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb12-16"><a href="http://localhost:3348/#cb12-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-17"><a href="http://localhost:3348/#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># temporal features</span></span>
<span id="cb12-18"><a href="http://localhost:3348/#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">WeekdayName =</span> <span class="fu">factor</span>(<span class="fu">weekdays</span>(Date), </span>
<span id="cb12-19"><a href="http://localhost:3348/#cb12-19" aria-hidden="true" tabindex="-1"></a>                         <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Monday"</span>, <span class="st">"Tuesday"</span>, <span class="st">"Wednesday"</span>, </span>
<span id="cb12-20"><a href="http://localhost:3348/#cb12-20" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"Thursday"</span>, <span class="st">"Friday"</span>, <span class="st">"Saturday"</span>, <span class="st">"Sunday"</span>)),</span>
<span id="cb12-21"><a href="http://localhost:3348/#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">WeekdayNum =</span> <span class="fu">wday</span>(Date, <span class="at">week_start =</span> <span class="dv">1</span>),</span>
<span id="cb12-22"><a href="http://localhost:3348/#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">MonthName =</span> <span class="fu">factor</span>(<span class="fu">month</span>(Date, <span class="at">label =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb12-23"><a href="http://localhost:3348/#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">Week =</span> <span class="fu">week</span>(Date),</span>
<span id="cb12-24"><a href="http://localhost:3348/#cb12-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">Quarter =</span> <span class="fu">quarter</span>(Date),</span>
<span id="cb12-25"><a href="http://localhost:3348/#cb12-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-26"><a href="http://localhost:3348/#cb12-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># shift duration</span></span>
<span id="cb12-27"><a href="http://localhost:3348/#cb12-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">Shift_Duration =</span> <span class="fu">case_when</span>(</span>
<span id="cb12-28"><a href="http://localhost:3348/#cb12-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"7-3"</span>, Shift_x) <span class="sc">~</span> <span class="st">"7-3"</span>,</span>
<span id="cb12-29"><a href="http://localhost:3348/#cb12-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"7-5"</span>, Shift_x) <span class="sc">~</span> <span class="st">"7-5"</span>,</span>
<span id="cb12-30"><a href="http://localhost:3348/#cb12-30" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span></span>
<span id="cb12-31"><a href="http://localhost:3348/#cb12-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-32"><a href="http://localhost:3348/#cb12-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-33"><a href="http://localhost:3348/#cb12-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-34"><a href="http://localhost:3348/#cb12-34" aria-hidden="true" tabindex="-1"></a><span class="co"># filter out none staffing type</span></span>
<span id="cb12-35"><a href="http://localhost:3348/#cb12-35" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Staffing_Type <span class="sc">!=</span> <span class="st">"None"</span>)</span>
<span id="cb12-36"><a href="http://localhost:3348/#cb12-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-37"><a href="http://localhost:3348/#cb12-37" aria-hidden="true" tabindex="-1"></a><span class="co"># make staffing type a factor</span></span>
<span id="cb12-38"><a href="http://localhost:3348/#cb12-38" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>Staffing_Type <span class="ot">&lt;-</span> <span class="fu">factor</span>(data<span class="sc">$</span>Staffing_Type, </span>
<span id="cb12-39"><a href="http://localhost:3348/#cb12-39" aria-hidden="true" tabindex="-1"></a>                              <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"CRNA_Only"</span>, <span class="st">"Mixed"</span>, <span class="st">"Resident_Only"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="exploratory-data-analysis" class="level1">
<h1>Exploratory Data Analysis</h1>
<section id="staffing-type-distribution" class="level2">
<h2 class="anchored" data-anchor-id="staffing-type-distribution">Staffing Type Distribution<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#staffing-type-distribution" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="http://localhost:3348/#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate distribution</span></span>
<span id="cb13-2"><a href="http://localhost:3348/#cb13-2" aria-hidden="true" tabindex="-1"></a>staffing_dist <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="http://localhost:3348/#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Staffing_Type) <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="http://localhost:3348/#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Percentage =</span> <span class="fu">round</span>(n <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span>
<span id="cb13-5"><a href="http://localhost:3348/#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="http://localhost:3348/#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># display table</span></span>
<span id="cb13-7"><a href="http://localhost:3348/#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(staffing_dist, <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Staffing Type"</span>, <span class="st">"Count"</span>, <span class="st">"Percentage (%)"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Staffing Type</th>
<th style="text-align: right;">Count</th>
<th style="text-align: right;">Percentage (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CRNA_Only</td>
<td style="text-align: right;">1541</td>
<td style="text-align: right;">56.76</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mixed</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">7.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Resident_Only</td>
<td style="text-align: right;">984</td>
<td style="text-align: right;">36.24</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="http://localhost:3348/#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># visualize distribution</span></span>
<span id="cb14-2"><a href="http://localhost:3348/#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(staffing_dist, <span class="fu">aes</span>(<span class="at">x =</span> Staffing_Type, <span class="at">y =</span> n, <span class="at">fill =</span> Staffing_Type)) <span class="sc">+</span></span>
<span id="cb14-3"><a href="http://localhost:3348/#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb14-4"><a href="http://localhost:3348/#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(n, <span class="st">" ("</span>, Percentage, <span class="st">"%)"</span>)), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb14-5"><a href="http://localhost:3348/#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>, <span class="at">end =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb14-6"><a href="http://localhost:3348/#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribution of Staffing Types"</span>,</span>
<span id="cb14-7"><a href="http://localhost:3348/#cb14-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Data is highly imbalanced - Mixed staffing is rare (~7%)"</span>,</span>
<span id="cb14-8"><a href="http://localhost:3348/#cb14-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Staffing Type"</span>,</span>
<span id="cb14-9"><a href="http://localhost:3348/#cb14-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Shifts"</span>) <span class="sc">+</span></span>
<span id="cb14-10"><a href="http://localhost:3348/#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb14-11"><a href="http://localhost:3348/#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fu">max</span>(staffing_dist<span class="sc">$</span>n) <span class="sc">*</span> <span class="fl">1.15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Faculty Scheduling Predicting Staffing Preferences_files/staffing-plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The data shows significant class imbalance with CRNA_Only shifts comprising about 57% of all records, while Mixed staffing represents only about 7%.</p>
</section>
<section id="team-size-distribution" class="level2">
<h2 class="anchored" data-anchor-id="team-size-distribution">Team Size Distribution<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#team-size-distribution" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="http://localhost:3348/#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># team size summary</span></span>
<span id="cb15-2"><a href="http://localhost:3348/#cb15-2" aria-hidden="true" tabindex="-1"></a>team_summary <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="http://localhost:3348/#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Staffing_Type) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="http://localhost:3348/#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb15-5"><a href="http://localhost:3348/#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean_CRNA =</span> <span class="fu">round</span>(<span class="fu">mean</span>(CRNA_Count), <span class="dv">2</span>),</span>
<span id="cb15-6"><a href="http://localhost:3348/#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean_Resident =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Resident_Count), <span class="dv">2</span>),</span>
<span id="cb15-7"><a href="http://localhost:3348/#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean_Total =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Total_Team_Size), <span class="dv">2</span>),</span>
<span id="cb15-8"><a href="http://localhost:3348/#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Median_Total =</span> <span class="fu">median</span>(Total_Team_Size),</span>
<span id="cb15-9"><a href="http://localhost:3348/#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">SD_Total =</span> <span class="fu">round</span>(<span class="fu">sd</span>(Total_Team_Size), <span class="dv">2</span>)</span>
<span id="cb15-10"><a href="http://localhost:3348/#cb15-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-11"><a href="http://localhost:3348/#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="http://localhost:3348/#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(team_summary, <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Staffing Type"</span>, <span class="st">"Mean CRNAs"</span>, <span class="st">"Mean Residents"</span>, </span>
<span id="cb15-13"><a href="http://localhost:3348/#cb15-13" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">"Mean Total"</span>, <span class="st">"Median Total"</span>, <span class="st">"SD Total"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 15%">
<col style="width: 20%">
<col style="width: 15%">
<col style="width: 17%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Staffing Type</th>
<th style="text-align: right;">Mean CRNAs</th>
<th style="text-align: right;">Mean Residents</th>
<th style="text-align: right;">Mean Total</th>
<th style="text-align: right;">Median Total</th>
<th style="text-align: right;">SD Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CRNA_Only</td>
<td style="text-align: right;">3.54</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">3.54</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.97</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mixed</td>
<td style="text-align: right;">1.08</td>
<td style="text-align: right;">1.08</td>
<td style="text-align: right;">2.17</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.44</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Resident_Only</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.70</td>
<td style="text-align: right;">1.70</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.54</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="http://localhost:3348/#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># boxplot of team sizes by staffing type</span></span>
<span id="cb16-2"><a href="http://localhost:3348/#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> Staffing_Type, <span class="at">y =</span> Total_Team_Size, <span class="at">fill =</span> Staffing_Type)) <span class="sc">+</span></span>
<span id="cb16-3"><a href="http://localhost:3348/#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb16-4"><a href="http://localhost:3348/#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>, <span class="at">end =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb16-5"><a href="http://localhost:3348/#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Team Size Distribution by Staffing Type"</span>,</span>
<span id="cb16-6"><a href="http://localhost:3348/#cb16-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Staffing Type"</span>,</span>
<span id="cb16-7"><a href="http://localhost:3348/#cb16-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total Team Size"</span>) <span class="sc">+</span></span>
<span id="cb16-8"><a href="http://localhost:3348/#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Faculty Scheduling Predicting Staffing Preferences_files/team-size-boxplot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="faculty-level-analysis" class="level2">
<h2 class="anchored" data-anchor-id="faculty-level-analysis">Faculty-Level Analysis<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#faculty-level-analysis" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="http://localhost:3348/#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate faculty preferences</span></span>
<span id="cb17-2"><a href="http://localhost:3348/#cb17-2" aria-hidden="true" tabindex="-1"></a>faculty_prefs <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="http://localhost:3348/#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Faculty) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="http://localhost:3348/#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb17-5"><a href="http://localhost:3348/#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Shifts =</span> <span class="fu">n</span>(),</span>
<span id="cb17-6"><a href="http://localhost:3348/#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">CRNA_Only_Pct =</span> <span class="fu">round</span>(<span class="fu">sum</span>(Staffing_Type <span class="sc">==</span> <span class="st">"CRNA_Only"</span>) <span class="sc">/</span> <span class="fu">n</span>() <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>),</span>
<span id="cb17-7"><a href="http://localhost:3348/#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mixed_Pct =</span> <span class="fu">round</span>(<span class="fu">sum</span>(Staffing_Type <span class="sc">==</span> <span class="st">"Mixed"</span>) <span class="sc">/</span> <span class="fu">n</span>() <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>),</span>
<span id="cb17-8"><a href="http://localhost:3348/#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Resident_Only_Pct =</span> <span class="fu">round</span>(<span class="fu">sum</span>(Staffing_Type <span class="sc">==</span> <span class="st">"Resident_Only"</span>) <span class="sc">/</span> <span class="fu">n</span>() <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>),</span>
<span id="cb17-9"><a href="http://localhost:3348/#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_Team_Size =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Total_Team_Size), <span class="dv">2</span>),</span>
<span id="cb17-10"><a href="http://localhost:3348/#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_CRNA_Count =</span> <span class="fu">round</span>(<span class="fu">mean</span>(CRNA_Count), <span class="dv">2</span>),</span>
<span id="cb17-11"><a href="http://localhost:3348/#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_Resident_Count =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Resident_Count), <span class="dv">2</span>)</span>
<span id="cb17-12"><a href="http://localhost:3348/#cb17-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-13"><a href="http://localhost:3348/#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_Shifts))</span>
<span id="cb17-14"><a href="http://localhost:3348/#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="http://localhost:3348/#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co"># show top 15 faculty by shift count</span></span>
<span id="cb17-16"><a href="http://localhost:3348/#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(faculty_prefs, <span class="dv">15</span>), </span>
<span id="cb17-17"><a href="http://localhost:3348/#cb17-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Faculty"</span>, <span class="st">"Total Shifts"</span>, <span class="st">"CRNA Only %"</span>, <span class="st">"Mixed %"</span>, </span>
<span id="cb17-18"><a href="http://localhost:3348/#cb17-18" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Resident Only %"</span>, <span class="st">"Avg Team"</span>, <span class="st">"Avg CRNAs"</span>, <span class="st">"Avg Residents"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 17%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Faculty</th>
<th style="text-align: right;">Total Shifts</th>
<th style="text-align: right;">CRNA Only %</th>
<th style="text-align: right;">Mixed %</th>
<th style="text-align: right;">Resident Only %</th>
<th style="text-align: right;">Avg Team</th>
<th style="text-align: right;">Avg CRNAs</th>
<th style="text-align: right;">Avg Residents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">FacultyI</td>
<td style="text-align: right;">149</td>
<td style="text-align: right;">98.0</td>
<td style="text-align: right;">0.7</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">3.16</td>
<td style="text-align: right;">3.13</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty48</td>
<td style="text-align: right;">142</td>
<td style="text-align: right;">97.9</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.7</td>
<td style="text-align: right;">3.37</td>
<td style="text-align: right;">3.34</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyQ</td>
<td style="text-align: right;">134</td>
<td style="text-align: right;">100.0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">5.80</td>
<td style="text-align: right;">5.80</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">FacultyJ</td>
<td style="text-align: right;">133</td>
<td style="text-align: right;">99.2</td>
<td style="text-align: right;">0.8</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">3.40</td>
<td style="text-align: right;">3.39</td>
<td style="text-align: right;">0.01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Faculty50</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">73.3</td>
<td style="text-align: right;">4.2</td>
<td style="text-align: right;">22.5</td>
<td style="text-align: right;">3.02</td>
<td style="text-align: right;">2.51</td>
<td style="text-align: right;">0.52</td>
</tr>
<tr class="even">
<td style="text-align: left;">FacultyL</td>
<td style="text-align: right;">114</td>
<td style="text-align: right;">43.9</td>
<td style="text-align: right;">11.4</td>
<td style="text-align: right;">44.7</td>
<td style="text-align: right;">2.65</td>
<td style="text-align: right;">1.63</td>
<td style="text-align: right;">1.02</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Faculty31</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">7.6</td>
<td style="text-align: right;">11.4</td>
<td style="text-align: right;">81.0</td>
<td style="text-align: right;">1.57</td>
<td style="text-align: right;">0.35</td>
<td style="text-align: right;">1.22</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty42</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">13.3</td>
<td style="text-align: right;">21.1</td>
<td style="text-align: right;">65.6</td>
<td style="text-align: right;">1.91</td>
<td style="text-align: right;">0.61</td>
<td style="text-align: right;">1.30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyW</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">32.2</td>
<td style="text-align: right;">13.3</td>
<td style="text-align: right;">54.4</td>
<td style="text-align: right;">2.61</td>
<td style="text-align: right;">1.26</td>
<td style="text-align: right;">1.36</td>
</tr>
<tr class="even">
<td style="text-align: left;">FacultyE</td>
<td style="text-align: right;">87</td>
<td style="text-align: right;">37.9</td>
<td style="text-align: right;">17.2</td>
<td style="text-align: right;">44.8</td>
<td style="text-align: right;">2.29</td>
<td style="text-align: right;">1.51</td>
<td style="text-align: right;">0.78</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Faculty45</td>
<td style="text-align: right;">84</td>
<td style="text-align: right;">21.4</td>
<td style="text-align: right;">16.7</td>
<td style="text-align: right;">61.9</td>
<td style="text-align: right;">1.96</td>
<td style="text-align: right;">0.80</td>
<td style="text-align: right;">1.17</td>
</tr>
<tr class="even">
<td style="text-align: left;">FacultyP</td>
<td style="text-align: right;">78</td>
<td style="text-align: right;">80.8</td>
<td style="text-align: right;">3.8</td>
<td style="text-align: right;">15.4</td>
<td style="text-align: right;">3.10</td>
<td style="text-align: right;">2.76</td>
<td style="text-align: right;">0.35</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Faculty49</td>
<td style="text-align: right;">76</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">13.2</td>
<td style="text-align: right;">85.5</td>
<td style="text-align: right;">1.51</td>
<td style="text-align: right;">0.16</td>
<td style="text-align: right;">1.36</td>
</tr>
<tr class="even">
<td style="text-align: left;">FacultyB</td>
<td style="text-align: right;">74</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">10.8</td>
<td style="text-align: right;">87.8</td>
<td style="text-align: right;">1.68</td>
<td style="text-align: right;">0.18</td>
<td style="text-align: right;">1.50</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyX</td>
<td style="text-align: right;">72</td>
<td style="text-align: right;">90.3</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">6.9</td>
<td style="text-align: right;">3.32</td>
<td style="text-align: right;">3.15</td>
<td style="text-align: right;">0.17</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="http://localhost:3348/#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># categorize faculty by mixed team usage</span></span>
<span id="cb18-2"><a href="http://localhost:3348/#cb18-2" aria-hidden="true" tabindex="-1"></a>mixed_high <span class="ot">&lt;-</span> <span class="fu">sum</span>(faculty_prefs<span class="sc">$</span>Mixed_Pct <span class="sc">&gt;</span> <span class="dv">20</span>)</span>
<span id="cb18-3"><a href="http://localhost:3348/#cb18-3" aria-hidden="true" tabindex="-1"></a>mixed_medium <span class="ot">&lt;-</span> <span class="fu">sum</span>(faculty_prefs<span class="sc">$</span>Mixed_Pct <span class="sc">&gt;=</span> <span class="dv">10</span> <span class="sc">&amp;</span> faculty_prefs<span class="sc">$</span>Mixed_Pct <span class="sc">&lt;=</span> <span class="dv">20</span>)</span>
<span id="cb18-4"><a href="http://localhost:3348/#cb18-4" aria-hidden="true" tabindex="-1"></a>mixed_low <span class="ot">&lt;-</span> <span class="fu">sum</span>(faculty_prefs<span class="sc">$</span>Mixed_Pct <span class="sc">&lt;</span> <span class="dv">10</span>)</span>
<span id="cb18-5"><a href="http://localhost:3348/#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="http://localhost:3348/#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Faculty who use Mixed &gt;20% of time:"</span>, mixed_high, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Faculty who use Mixed &gt;20% of time: 1 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="http://localhost:3348/#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Faculty who use Mixed 10-20% of time:"</span>, mixed_medium, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Faculty who use Mixed 10-20% of time: 16 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="http://localhost:3348/#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Faculty who use Mixed &lt;10% of time:"</span>, mixed_low, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Faculty who use Mixed &lt;10% of time: 36 </code></pre>
</div>
</div>
</section>
<section id="temporal-patterns" class="level2">
<h2 class="anchored" data-anchor-id="temporal-patterns">Temporal Patterns<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#temporal-patterns" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="http://localhost:3348/#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># staffing by weekday</span></span>
<span id="cb24-2"><a href="http://localhost:3348/#cb24-2" aria-hidden="true" tabindex="-1"></a>weekday_staffing <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="http://localhost:3348/#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(WeekdayName <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Monday"</span>, <span class="st">"Tuesday"</span>, <span class="st">"Wednesday"</span>, <span class="st">"Thursday"</span>, <span class="st">"Friday"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="http://localhost:3348/#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(WeekdayName, Staffing_Type) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="http://localhost:3348/#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(WeekdayName) <span class="sc">%&gt;%</span></span>
<span id="cb24-6"><a href="http://localhost:3348/#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Pct =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb24-7"><a href="http://localhost:3348/#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="http://localhost:3348/#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(weekday_staffing, <span class="fu">aes</span>(<span class="at">x =</span> WeekdayName, <span class="at">y =</span> n, <span class="at">fill =</span> Staffing_Type)) <span class="sc">+</span></span>
<span id="cb24-9"><a href="http://localhost:3348/#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb24-10"><a href="http://localhost:3348/#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>, <span class="at">end =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb24-11"><a href="http://localhost:3348/#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Staffing Patterns by Weekday"</span>,</span>
<span id="cb24-12"><a href="http://localhost:3348/#cb24-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Weekday"</span>,</span>
<span id="cb24-13"><a href="http://localhost:3348/#cb24-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Shifts"</span>,</span>
<span id="cb24-14"><a href="http://localhost:3348/#cb24-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Staffing Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Faculty Scheduling Predicting Staffing Preferences_files/weekday-patterns-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="http://localhost:3348/#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># monthly trends</span></span>
<span id="cb25-2"><a href="http://localhost:3348/#cb25-2" aria-hidden="true" tabindex="-1"></a>monthly_staffing <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="http://localhost:3348/#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(MonthName, Staffing_Type) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="http://localhost:3348/#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(MonthName) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="http://localhost:3348/#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Pct =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb25-6"><a href="http://localhost:3348/#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="http://localhost:3348/#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(monthly_staffing, <span class="fu">aes</span>(<span class="at">x =</span> MonthName, <span class="at">y =</span> Pct, <span class="at">color =</span> Staffing_Type, <span class="at">group =</span> Staffing_Type)) <span class="sc">+</span></span>
<span id="cb25-8"><a href="http://localhost:3348/#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb25-9"><a href="http://localhost:3348/#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb25-10"><a href="http://localhost:3348/#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>, <span class="at">end =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb25-11"><a href="http://localhost:3348/#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Monthly Staffing Type Trends"</span>,</span>
<span id="cb25-12"><a href="http://localhost:3348/#cb25-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Month"</span>,</span>
<span id="cb25-13"><a href="http://localhost:3348/#cb25-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Percentage of Shifts"</span>,</span>
<span id="cb25-14"><a href="http://localhost:3348/#cb25-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Staffing Type"</span>) <span class="sc">+</span></span>
<span id="cb25-15"><a href="http://localhost:3348/#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Faculty Scheduling Predicting Staffing Preferences_files/monthly-patterns-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="most-frequently-scheduled-staff" class="level2">
<h2 class="anchored" data-anchor-id="most-frequently-scheduled-staff">Most Frequently Scheduled Staff<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#most-frequently-scheduled-staff" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="http://localhost:3348/#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># find most scheduled CRNAs</span></span>
<span id="cb26-2"><a href="http://localhost:3348/#cb26-2" aria-hidden="true" tabindex="-1"></a>crna_sums <span class="ot">&lt;-</span> <span class="fu">colSums</span>(data[, crna_cols] <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-3"><a href="http://localhost:3348/#cb26-3" aria-hidden="true" tabindex="-1"></a>crna_counts <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb26-4"><a href="http://localhost:3348/#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">CRNA =</span> <span class="fu">names</span>(crna_sums),</span>
<span id="cb26-5"><a href="http://localhost:3348/#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Shifts =</span> <span class="fu">as.numeric</span>(crna_sums)</span>
<span id="cb26-6"><a href="http://localhost:3348/#cb26-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb26-7"><a href="http://localhost:3348/#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Shifts)) <span class="sc">%&gt;%</span></span>
<span id="cb26-8"><a href="http://localhost:3348/#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>)</span>
<span id="cb26-9"><a href="http://localhost:3348/#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="http://localhost:3348/#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(crna_counts, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(CRNA, Shifts), <span class="at">y =</span> Shifts)) <span class="sc">+</span></span>
<span id="cb26-11"><a href="http://localhost:3348/#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"#3b528b"</span>) <span class="sc">+</span></span>
<span id="cb26-12"><a href="http://localhost:3348/#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb26-13"><a href="http://localhost:3348/#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 15 Most Frequently Scheduled CRNAs"</span>,</span>
<span id="cb26-14"><a href="http://localhost:3348/#cb26-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"CRNA"</span>,</span>
<span id="cb26-15"><a href="http://localhost:3348/#cb26-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Shifts"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Faculty Scheduling Predicting Staffing Preferences_files/top-crnas-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="http://localhost:3348/#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># find most scheduled residents</span></span>
<span id="cb27-2"><a href="http://localhost:3348/#cb27-2" aria-hidden="true" tabindex="-1"></a>resident_sums <span class="ot">&lt;-</span> <span class="fu">colSums</span>(data[, resident_cols] <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb27-3"><a href="http://localhost:3348/#cb27-3" aria-hidden="true" tabindex="-1"></a>resident_counts <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb27-4"><a href="http://localhost:3348/#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Resident =</span> <span class="fu">names</span>(resident_sums),</span>
<span id="cb27-5"><a href="http://localhost:3348/#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Shifts =</span> <span class="fu">as.numeric</span>(resident_sums)</span>
<span id="cb27-6"><a href="http://localhost:3348/#cb27-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb27-7"><a href="http://localhost:3348/#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Shifts)) <span class="sc">%&gt;%</span></span>
<span id="cb27-8"><a href="http://localhost:3348/#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>)</span>
<span id="cb27-9"><a href="http://localhost:3348/#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="http://localhost:3348/#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(resident_counts, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Resident, Shifts), <span class="at">y =</span> Shifts)) <span class="sc">+</span></span>
<span id="cb27-11"><a href="http://localhost:3348/#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"#5ec962"</span>) <span class="sc">+</span></span>
<span id="cb27-12"><a href="http://localhost:3348/#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb27-13"><a href="http://localhost:3348/#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 15 Most Frequently Scheduled Residents"</span>,</span>
<span id="cb27-14"><a href="http://localhost:3348/#cb27-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Resident"</span>,</span>
<span id="cb27-15"><a href="http://localhost:3348/#cb27-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Shifts"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Faculty Scheduling Predicting Staffing Preferences_files/top-residents-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="availability-vs-team-size" class="level2">
<h2 class="anchored" data-anchor-id="availability-vs-team-size">Availability vs Team Size<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#availability-vs-team-size" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="http://localhost:3348/#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># correlation between room count and team size</span></span>
<span id="cb28-2"><a href="http://localhost:3348/#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> Avg_Room_Count, <span class="at">y =</span> Total_Team_Size)) <span class="sc">+</span></span>
<span id="cb28-3"><a href="http://localhost:3348/#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"#3b528b"</span>) <span class="sc">+</span></span>
<span id="cb28-4"><a href="http://localhost:3348/#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb28-5"><a href="http://localhost:3348/#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Room Count vs Team Size"</span>,</span>
<span id="cb28-6"><a href="http://localhost:3348/#cb28-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">"Correlation:"</span>, <span class="fu">round</span>(<span class="fu">cor</span>(data<span class="sc">$</span>Avg_Room_Count, data<span class="sc">$</span>Total_Team_Size, </span>
<span id="cb28-7"><a href="http://localhost:3348/#cb28-7" aria-hidden="true" tabindex="-1"></a>                                                   <span class="at">use =</span> <span class="st">"complete.obs"</span>), <span class="dv">3</span>)),</span>
<span id="cb28-8"><a href="http://localhost:3348/#cb28-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average Room Count"</span>,</span>
<span id="cb28-9"><a href="http://localhost:3348/#cb28-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total Team Size"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Faculty Scheduling Predicting Staffing Preferences_files/correlation-plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="hypothesis-testing" class="level1">
<h1>Hypothesis Testing</h1>
<section id="test-1-chi-square-test-for-staffing-type-and-weekday" class="level2">
<h2 class="anchored" data-anchor-id="test-1-chi-square-test-for-staffing-type-and-weekday">Test 1: Chi-square test for staffing type and weekday<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#test-1-chi-square-test-for-staffing-type-and-weekday" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>We test whether the distribution of staffing types differs significantly across weekdays.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="http://localhost:3348/#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create contingency table for weekdays (excluding weekends)</span></span>
<span id="cb29-2"><a href="http://localhost:3348/#cb29-2" aria-hidden="true" tabindex="-1"></a>weekday_data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="http://localhost:3348/#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(WeekdayName <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Monday"</span>, <span class="st">"Tuesday"</span>, <span class="st">"Wednesday"</span>, <span class="st">"Thursday"</span>, <span class="st">"Friday"</span>))</span>
<span id="cb29-4"><a href="http://localhost:3348/#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="http://localhost:3348/#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># drop unused factor levels before creating table</span></span>
<span id="cb29-6"><a href="http://localhost:3348/#cb29-6" aria-hidden="true" tabindex="-1"></a>weekday_data<span class="sc">$</span>WeekdayName <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(weekday_data<span class="sc">$</span>WeekdayName)</span>
<span id="cb29-7"><a href="http://localhost:3348/#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="http://localhost:3348/#cb29-8" aria-hidden="true" tabindex="-1"></a>staffing_weekday_table <span class="ot">&lt;-</span> <span class="fu">table</span>(weekday_data<span class="sc">$</span>WeekdayName, weekday_data<span class="sc">$</span>Staffing_Type)</span>
<span id="cb29-9"><a href="http://localhost:3348/#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(staffing_weekday_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           
            CRNA_Only Mixed Resident_Only
  Monday          292    35           185
  Tuesday         305    41           210
  Wednesday       310    29           202
  Thursday        328    46           196
  Friday          306    39           191</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="http://localhost:3348/#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chi-square test</span></span>
<span id="cb31-2"><a href="http://localhost:3348/#cb31-2" aria-hidden="true" tabindex="-1"></a>chi_test <span class="ot">&lt;-</span> <span class="fu">chisq.test</span>(staffing_weekday_table)</span>
<span id="cb31-3"><a href="http://localhost:3348/#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(chi_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  staffing_weekday_table
X-squared = 4.7973, df = 8, p-value = 0.779</code></pre>
</div>
</div>
<p><strong>Interpretation:</strong> The chi-square test shows no significant association between weekday and staffing type (p = 0.779). Staffing patterns remain consistent across weekdays.</p>
</section>
<section id="test-2-correlation-between-room-count-and-team-size" class="level2">
<h2 class="anchored" data-anchor-id="test-2-correlation-between-room-count-and-team-size">Test 2: Correlation between room count and team size<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#test-2-correlation-between-room-count-and-team-size" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>We test whether higher room counts are associated with larger team sizes.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="http://localhost:3348/#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pearson correlation test</span></span>
<span id="cb33-2"><a href="http://localhost:3348/#cb33-2" aria-hidden="true" tabindex="-1"></a>cor_test <span class="ot">&lt;-</span> <span class="fu">cor.test</span>(data<span class="sc">$</span>Avg_Room_Count, data<span class="sc">$</span>Total_Team_Size)</span>
<span id="cb33-3"><a href="http://localhost:3348/#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cor_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  data$Avg_Room_Count and data$Total_Team_Size
t = 59.681, df = 2644, p-value &lt; 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.7408770 0.7733739
sample estimates:
      cor 
0.7575945 </code></pre>
</div>
</div>
</section>
<section id="test-3-t-test-comparing-team-sizes-on-holidays-vs-non-holidays" class="level2">
<h2 class="anchored" data-anchor-id="test-3-t-test-comparing-team-sizes-on-holidays-vs-non-holidays">Test 3: T-test comparing team sizes on holidays vs non-holidays<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#test-3-t-test-comparing-team-sizes-on-holidays-vs-non-holidays" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="http://localhost:3348/#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># separate holiday and non-holiday data</span></span>
<span id="cb35-2"><a href="http://localhost:3348/#cb35-2" aria-hidden="true" tabindex="-1"></a>holiday_data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Holiday <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb35-3"><a href="http://localhost:3348/#cb35-3" aria-hidden="true" tabindex="-1"></a>non_holiday_data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Holiday <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb35-4"><a href="http://localhost:3348/#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="http://localhost:3348/#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Holiday shifts:"</span>, <span class="fu">nrow</span>(holiday_data), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Holiday shifts: 15 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="http://localhost:3348/#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Non-holiday shifts:"</span>, <span class="fu">nrow</span>(non_holiday_data), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Non-holiday shifts: 2700 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="http://localhost:3348/#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># t-test</span></span>
<span id="cb39-2"><a href="http://localhost:3348/#cb39-2" aria-hidden="true" tabindex="-1"></a>t_test_result <span class="ot">&lt;-</span> <span class="fu">t.test</span>(holiday_data<span class="sc">$</span>Total_Team_Size, non_holiday_data<span class="sc">$</span>Total_Team_Size)</span>
<span id="cb39-3"><a href="http://localhost:3348/#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(t_test_result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  holiday_data$Total_Team_Size and non_holiday_data$Total_Team_Size
t = 0.31382, df = 14.177, p-value = 0.7582
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -0.5330066  0.7159695
sample estimates:
mean of x mean of y 
 2.866667  2.775185 </code></pre>
</div>
</div>
<p><strong>Interpretation:</strong> There is no significant difference in team size between holiday and non-holiday shifts (p = 0.739). The department maintains consistent staffing regardless of holiday status.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="http://localhost:3348/#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test 4</span></span>
<span id="cb41-2"><a href="http://localhost:3348/#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># test if team sizes differ significantly across faculty</span></span>
<span id="cb41-3"><a href="http://localhost:3348/#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># use top 15 faculty with most shifts for cleaner analysis</span></span>
<span id="cb41-4"><a href="http://localhost:3348/#cb41-4" aria-hidden="true" tabindex="-1"></a>top_fac <span class="ot">&lt;-</span> faculty_prefs <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Faculty)</span>
<span id="cb41-5"><a href="http://localhost:3348/#cb41-5" aria-hidden="true" tabindex="-1"></a>faculty_subset <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Faculty <span class="sc">%in%</span> top_fac)</span>
<span id="cb41-6"><a href="http://localhost:3348/#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="http://localhost:3348/#cb41-7" aria-hidden="true" tabindex="-1"></a>anova_faculty <span class="ot">&lt;-</span> <span class="fu">aov</span>(Total_Team_Size <span class="sc">~</span> Faculty, <span class="at">data =</span> faculty_subset)</span>
<span id="cb41-8"><a href="http://localhost:3348/#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(anova_faculty)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>              Df Sum Sq Mean Sq F value Pr(&gt;F)    
Faculty       14 1868.9  133.49   228.3 &lt;2e-16 ***
Residuals   1533  896.6    0.58                   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="http://localhost:3348/#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test 5</span></span>
<span id="cb43-2"><a href="http://localhost:3348/#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># test if staffing type preferences differ across faculty</span></span>
<span id="cb43-3"><a href="http://localhost:3348/#cb43-3" aria-hidden="true" tabindex="-1"></a>top_fac <span class="ot">&lt;-</span> faculty_prefs <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Faculty)</span>
<span id="cb43-4"><a href="http://localhost:3348/#cb43-4" aria-hidden="true" tabindex="-1"></a>faculty_subset <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Faculty <span class="sc">%in%</span> top_fac)</span>
<span id="cb43-5"><a href="http://localhost:3348/#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="http://localhost:3348/#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to factor FIRST, then drop levels</span></span>
<span id="cb43-7"><a href="http://localhost:3348/#cb43-7" aria-hidden="true" tabindex="-1"></a>faculty_subset<span class="sc">$</span>Faculty <span class="ot">&lt;-</span> <span class="fu">factor</span>(faculty_subset<span class="sc">$</span>Faculty)</span>
<span id="cb43-8"><a href="http://localhost:3348/#cb43-8" aria-hidden="true" tabindex="-1"></a>faculty_subset<span class="sc">$</span>Faculty <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(faculty_subset<span class="sc">$</span>Faculty)</span>
<span id="cb43-9"><a href="http://localhost:3348/#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="http://localhost:3348/#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Or do it in one line:</span></span>
<span id="cb43-11"><a href="http://localhost:3348/#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="co"># faculty_subset$Faculty &lt;- droplevels(factor(faculty_subset$Faculty))</span></span>
<span id="cb43-12"><a href="http://localhost:3348/#cb43-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-13"><a href="http://localhost:3348/#cb43-13" aria-hidden="true" tabindex="-1"></a>staffing_faculty_table <span class="ot">&lt;-</span> <span class="fu">table</span>(faculty_subset<span class="sc">$</span>Faculty, faculty_subset<span class="sc">$</span>Staffing_Type)</span>
<span id="cb43-14"><a href="http://localhost:3348/#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(staffing_faculty_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           
            CRNA_Only Mixed Resident_Only
  Faculty31         8    12            85
  Faculty42        12    19            59
  Faculty45        18    14            52
  Faculty48       139     2             1
  Faculty49         1    10            65
  Faculty50        88     5            27
  FacultyB          1     8            65
  FacultyE         33    15            39
  FacultyI        146     1             2
  FacultyJ        132     1             0
  FacultyL         50    13            51
  FacultyP         63     3            12
  FacultyQ        134     0             0
  FacultyW         29    12            49
  FacultyX         65     2             5</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="http://localhost:3348/#cb45-1" aria-hidden="true" tabindex="-1"></a>chi_faculty <span class="ot">&lt;-</span> <span class="fu">chisq.test</span>(staffing_faculty_table)</span>
<span id="cb45-2"><a href="http://localhost:3348/#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(chi_faculty)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  staffing_faculty_table
X-squared = 947.97, df = 28, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="http://localhost:3348/#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation</span></span>
<span id="cb47-2"><a href="http://localhost:3348/#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co"># test if faculty use more CRNAs when more are available</span></span>
<span id="cb47-3"><a href="http://localhost:3348/#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(data<span class="sc">$</span>Avg_CRNA_Count, data<span class="sc">$</span>CRNA_Count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  data$Avg_CRNA_Count and data$CRNA_Count
t = 57.541, df = 2644, p-value &lt; 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.7282407 0.7621058
sample estimates:
      cor 
0.7456544 </code></pre>
</div>
</div>
</section>
</section>
<section id="feature-engineering" class="level1">
<h1>Feature Engineering</h1>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="http://localhost:3348/#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create features for modeling</span></span>
<span id="cb49-2"><a href="http://localhost:3348/#cb49-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a href="http://localhost:3348/#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb49-4"><a href="http://localhost:3348/#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># team size categories</span></span>
<span id="cb49-5"><a href="http://localhost:3348/#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Team_Size_Category =</span> <span class="fu">case_when</span>(</span>
<span id="cb49-6"><a href="http://localhost:3348/#cb49-6" aria-hidden="true" tabindex="-1"></a>      Total_Team_Size <span class="sc">&lt;=</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Small"</span>,</span>
<span id="cb49-7"><a href="http://localhost:3348/#cb49-7" aria-hidden="true" tabindex="-1"></a>      Total_Team_Size <span class="sc">&lt;=</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"Medium"</span>,</span>
<span id="cb49-8"><a href="http://localhost:3348/#cb49-8" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Large"</span></span>
<span id="cb49-9"><a href="http://localhost:3348/#cb49-9" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-10"><a href="http://localhost:3348/#cb49-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Team_Size_Category =</span> <span class="fu">factor</span>(Team_Size_Category, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Small"</span>, <span class="st">"Medium"</span>, <span class="st">"Large"</span>)),</span>
<span id="cb49-11"><a href="http://localhost:3348/#cb49-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb49-12"><a href="http://localhost:3348/#cb49-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># is weekend</span></span>
<span id="cb49-13"><a href="http://localhost:3348/#cb49-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">Is_Weekend =</span> WeekdayName <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Saturday"</span>, <span class="st">"Sunday"</span>),</span>
<span id="cb49-14"><a href="http://localhost:3348/#cb49-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb49-15"><a href="http://localhost:3348/#cb49-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># years of experience (if available)</span></span>
<span id="cb49-16"><a href="http://localhost:3348/#cb49-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">Years_Experience =</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(YearsSinceMedSchoolGraduation), </span>
<span id="cb49-17"><a href="http://localhost:3348/#cb49-17" aria-hidden="true" tabindex="-1"></a>                               YearsSinceMedSchoolGraduation, <span class="dv">0</span>),</span>
<span id="cb49-18"><a href="http://localhost:3348/#cb49-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb49-19"><a href="http://localhost:3348/#cb49-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># experience category</span></span>
<span id="cb49-20"><a href="http://localhost:3348/#cb49-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">Experience_Category =</span> <span class="fu">case_when</span>(</span>
<span id="cb49-21"><a href="http://localhost:3348/#cb49-21" aria-hidden="true" tabindex="-1"></a>      Years_Experience <span class="sc">&lt;=</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"Junior"</span>,</span>
<span id="cb49-22"><a href="http://localhost:3348/#cb49-22" aria-hidden="true" tabindex="-1"></a>      Years_Experience <span class="sc">&lt;=</span> <span class="dv">15</span> <span class="sc">~</span> <span class="st">"Mid-Career"</span>,</span>
<span id="cb49-23"><a href="http://localhost:3348/#cb49-23" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Senior"</span></span>
<span id="cb49-24"><a href="http://localhost:3348/#cb49-24" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-25"><a href="http://localhost:3348/#cb49-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">Experience_Category =</span> <span class="fu">factor</span>(Experience_Category, </span>
<span id="cb49-26"><a href="http://localhost:3348/#cb49-26" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Junior"</span>, <span class="st">"Mid-Career"</span>, <span class="st">"Senior"</span>))</span>
<span id="cb49-27"><a href="http://localhost:3348/#cb49-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-28"><a href="http://localhost:3348/#cb49-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-29"><a href="http://localhost:3348/#cb49-29" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate faculty-level historical features</span></span>
<span id="cb49-30"><a href="http://localhost:3348/#cb49-30" aria-hidden="true" tabindex="-1"></a>faculty_history <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb49-31"><a href="http://localhost:3348/#cb49-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Faculty) <span class="sc">%&gt;%</span></span>
<span id="cb49-32"><a href="http://localhost:3348/#cb49-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb49-33"><a href="http://localhost:3348/#cb49-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hist_Avg_Team_Size =</span> <span class="fu">mean</span>(Total_Team_Size),</span>
<span id="cb49-34"><a href="http://localhost:3348/#cb49-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hist_Avg_CRNA =</span> <span class="fu">mean</span>(CRNA_Count),</span>
<span id="cb49-35"><a href="http://localhost:3348/#cb49-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hist_Avg_Resident =</span> <span class="fu">mean</span>(Resident_Count),</span>
<span id="cb49-36"><a href="http://localhost:3348/#cb49-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hist_CRNA_Only_Rate =</span> <span class="fu">mean</span>(Staffing_Type <span class="sc">==</span> <span class="st">"CRNA_Only"</span>),</span>
<span id="cb49-37"><a href="http://localhost:3348/#cb49-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hist_Mixed_Rate =</span> <span class="fu">mean</span>(Staffing_Type <span class="sc">==</span> <span class="st">"Mixed"</span>),</span>
<span id="cb49-38"><a href="http://localhost:3348/#cb49-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hist_Resident_Only_Rate =</span> <span class="fu">mean</span>(Staffing_Type <span class="sc">==</span> <span class="st">"Resident_Only"</span>),</span>
<span id="cb49-39"><a href="http://localhost:3348/#cb49-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hist_Shift_Count =</span> <span class="fu">n</span>()</span>
<span id="cb49-40"><a href="http://localhost:3348/#cb49-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-41"><a href="http://localhost:3348/#cb49-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-42"><a href="http://localhost:3348/#cb49-42" aria-hidden="true" tabindex="-1"></a><span class="co"># merge back to main data</span></span>
<span id="cb49-43"><a href="http://localhost:3348/#cb49-43" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb49-44"><a href="http://localhost:3348/#cb49-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(faculty_history, <span class="at">by =</span> <span class="st">"Faculty"</span>)</span>
<span id="cb49-45"><a href="http://localhost:3348/#cb49-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-46"><a href="http://localhost:3348/#cb49-46" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Features created successfully</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Features created successfully</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="http://localhost:3348/#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Total features available:"</span>, <span class="fu">ncol</span>(data), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Total features available: 271 </code></pre>
</div>
</div>
</section>
<section id="modeling" class="level1">
<h1>Modeling</h1>
<section id="data-preparation" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation">Data Preparation<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#data-preparation" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="http://localhost:3348/#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select features for modeling</span></span>
<span id="cb53-2"><a href="http://localhost:3348/#cb53-2" aria-hidden="true" tabindex="-1"></a>keep_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Staffing_Type"</span>, <span class="st">"Team_Size_Category"</span>, <span class="st">"Avg_CRNA_Count"</span>, <span class="st">"Avg_Res_Count"</span>, </span>
<span id="cb53-3"><a href="http://localhost:3348/#cb53-3" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Avg_Room_Count"</span>, <span class="st">"WeekdayNum"</span>, <span class="st">"Holiday"</span>, <span class="st">"Shift_Duration"</span>,</span>
<span id="cb53-4"><a href="http://localhost:3348/#cb53-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Hist_Avg_Team_Size"</span>, <span class="st">"Hist_CRNA_Only_Rate"</span>, <span class="st">"Hist_Mixed_Rate"</span>, </span>
<span id="cb53-5"><a href="http://localhost:3348/#cb53-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Hist_Resident_Only_Rate"</span>, <span class="st">"Years_Experience"</span>, <span class="st">"CT_Team"</span>, <span class="st">"APS_Team"</span>, </span>
<span id="cb53-6"><a href="http://localhost:3348/#cb53-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">"HB_Team"</span>, <span class="st">"BR_Team"</span>, <span class="st">"Faculty"</span>, <span class="st">"CRNA_Count"</span>, <span class="st">"Resident_Count"</span>)</span>
<span id="cb53-7"><a href="http://localhost:3348/#cb53-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-8"><a href="http://localhost:3348/#cb53-8" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> data[, keep_cols]</span>
<span id="cb53-9"><a href="http://localhost:3348/#cb53-9" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> model_data <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span>
<span id="cb53-10"><a href="http://localhost:3348/#cb53-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-11"><a href="http://localhost:3348/#cb53-11" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Records for modeling:"</span>, <span class="fu">nrow</span>(model_data), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Records for modeling: 2646 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="http://localhost:3348/#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># time-based split (80% train, 20% test)</span></span>
<span id="cb55-2"><a href="http://localhost:3348/#cb55-2" aria-hidden="true" tabindex="-1"></a>train_size <span class="ot">&lt;-</span> <span class="fu">floor</span>(<span class="fl">0.8</span> <span class="sc">*</span> <span class="fu">nrow</span>(model_data))</span>
<span id="cb55-3"><a href="http://localhost:3348/#cb55-3" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> model_data[<span class="dv">1</span><span class="sc">:</span>train_size, ]</span>
<span id="cb55-4"><a href="http://localhost:3348/#cb55-4" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> model_data[(train_size <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span><span class="fu">nrow</span>(model_data), ]</span>
<span id="cb55-5"><a href="http://localhost:3348/#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="http://localhost:3348/#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Training set size:"</span>, <span class="fu">nrow</span>(train_data), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Training set size: 2116 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="http://localhost:3348/#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Test set size:"</span>, <span class="fu">nrow</span>(test_data), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Test set size: 530 </code></pre>
</div>
</div>
</section>
<section id="staffing-type-preference-model" class="level2">
<h2 class="anchored" data-anchor-id="staffing-type-preference-model">Staffing Type Preference Model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#staffing-type-preference-model" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>This model predicts whether a faculty member will work with CRNAs only, residents only, or a mixed team.</p>
<section id="multinomial-logistic-regression" class="level3">
<h3 class="anchored" data-anchor-id="multinomial-logistic-regression">Multinomial Logistic Regression<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#multinomial-logistic-regression" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="http://localhost:3348/#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fit multinomial logistic regression</span></span>
<span id="cb59-2"><a href="http://localhost:3348/#cb59-2" aria-hidden="true" tabindex="-1"></a>log_model <span class="ot">&lt;-</span> <span class="fu">multinom</span>(Staffing_Type <span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Res_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> </span>
<span id="cb59-3"><a href="http://localhost:3348/#cb59-3" aria-hidden="true" tabindex="-1"></a>                        Hist_CRNA_Only_Rate <span class="sc">+</span> Hist_Mixed_Rate <span class="sc">+</span> Years_Experience,</span>
<span id="cb59-4"><a href="http://localhost:3348/#cb59-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">data =</span> train_data, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb59-5"><a href="http://localhost:3348/#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="http://localhost:3348/#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co"># predictions</span></span>
<span id="cb59-7"><a href="http://localhost:3348/#cb59-7" aria-hidden="true" tabindex="-1"></a>log_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(log_model, <span class="at">newdata =</span> test_data)</span>
<span id="cb59-8"><a href="http://localhost:3348/#cb59-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-9"><a href="http://localhost:3348/#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="co"># make sure both are factors with same levels</span></span>
<span id="cb59-10"><a href="http://localhost:3348/#cb59-10" aria-hidden="true" tabindex="-1"></a>log_pred <span class="ot">&lt;-</span> <span class="fu">factor</span>(log_pred, <span class="at">levels =</span> <span class="fu">levels</span>(test_data<span class="sc">$</span>Staffing_Type))</span>
<span id="cb59-11"><a href="http://localhost:3348/#cb59-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-12"><a href="http://localhost:3348/#cb59-12" aria-hidden="true" tabindex="-1"></a><span class="co"># confusion matrix</span></span>
<span id="cb59-13"><a href="http://localhost:3348/#cb59-13" aria-hidden="true" tabindex="-1"></a>log_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(log_pred, test_data<span class="sc">$</span>Staffing_Type)</span>
<span id="cb59-14"><a href="http://localhost:3348/#cb59-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(log_cm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

               Reference
Prediction      CRNA_Only Mixed Resident_Only
  CRNA_Only           381     7            19
  Mixed                 0     0             0
  Resident_Only        13     9           101

Overall Statistics
                                          
               Accuracy : 0.9094          
                 95% CI : (0.8817, 0.9325)
    No Information Rate : 0.7434          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.7595          
                                          
 Mcnemar's Test P-Value : 0.0006661       

Statistics by Class:

                     Class: CRNA_Only Class: Mixed Class: Resident_Only
Sensitivity                    0.9670      0.00000               0.8417
Specificity                    0.8088      1.00000               0.9463
Pos Pred Value                 0.9361          NaN               0.8211
Neg Pred Value                 0.8943      0.96981               0.9533
Prevalence                     0.7434      0.03019               0.2264
Detection Rate                 0.7189      0.00000               0.1906
Detection Prevalence           0.7679      0.00000               0.2321
Balanced Accuracy              0.8879      0.50000               0.8940</code></pre>
</div>
</div>
</section>
<section id="linear-discriminant-analysis" class="level3">
<h3 class="anchored" data-anchor-id="linear-discriminant-analysis">Linear Discriminant Analysis<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#linear-discriminant-analysis" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="http://localhost:3348/#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fit LDA</span></span>
<span id="cb61-2"><a href="http://localhost:3348/#cb61-2" aria-hidden="true" tabindex="-1"></a>lda_model <span class="ot">&lt;-</span> <span class="fu">lda</span>(Staffing_Type <span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Res_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> </span>
<span id="cb61-3"><a href="http://localhost:3348/#cb61-3" aria-hidden="true" tabindex="-1"></a>                   WeekdayNum <span class="sc">+</span> Hist_CRNA_Only_Rate <span class="sc">+</span> Hist_Mixed_Rate <span class="sc">+</span> Years_Experience,</span>
<span id="cb61-4"><a href="http://localhost:3348/#cb61-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> train_data)</span>
<span id="cb61-5"><a href="http://localhost:3348/#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="http://localhost:3348/#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co"># predictions</span></span>
<span id="cb61-7"><a href="http://localhost:3348/#cb61-7" aria-hidden="true" tabindex="-1"></a>lda_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(lda_model, <span class="at">newdata =</span> test_data)<span class="sc">$</span>class</span>
<span id="cb61-8"><a href="http://localhost:3348/#cb61-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-9"><a href="http://localhost:3348/#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="co"># confusion matrix</span></span>
<span id="cb61-10"><a href="http://localhost:3348/#cb61-10" aria-hidden="true" tabindex="-1"></a>lda_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(lda_pred, test_data<span class="sc">$</span>Staffing_Type)</span>
<span id="cb61-11"><a href="http://localhost:3348/#cb61-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lda_cm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

               Reference
Prediction      CRNA_Only Mixed Resident_Only
  CRNA_Only           381     7            19
  Mixed                 0     0             0
  Resident_Only        13     9           101

Overall Statistics
                                          
               Accuracy : 0.9094          
                 95% CI : (0.8817, 0.9325)
    No Information Rate : 0.7434          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.7595          
                                          
 Mcnemar's Test P-Value : 0.0006661       

Statistics by Class:

                     Class: CRNA_Only Class: Mixed Class: Resident_Only
Sensitivity                    0.9670      0.00000               0.8417
Specificity                    0.8088      1.00000               0.9463
Pos Pred Value                 0.9361          NaN               0.8211
Neg Pred Value                 0.8943      0.96981               0.9533
Prevalence                     0.7434      0.03019               0.2264
Detection Rate                 0.7189      0.00000               0.1906
Detection Prevalence           0.7679      0.00000               0.2321
Balanced Accuracy              0.8879      0.50000               0.8940</code></pre>
</div>
</div>
</section>
<section id="support-vector-machine" class="level3">
<h3 class="anchored" data-anchor-id="support-vector-machine">Support Vector Machine<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#support-vector-machine" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="http://localhost:3348/#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fit SVM with radial kernel</span></span>
<span id="cb63-2"><a href="http://localhost:3348/#cb63-2" aria-hidden="true" tabindex="-1"></a>svm_model <span class="ot">&lt;-</span> <span class="fu">svm</span>(Staffing_Type <span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Res_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> </span>
<span id="cb63-3"><a href="http://localhost:3348/#cb63-3" aria-hidden="true" tabindex="-1"></a>                   WeekdayNum <span class="sc">+</span> Hist_CRNA_Only_Rate <span class="sc">+</span> Hist_Mixed_Rate <span class="sc">+</span> Years_Experience,</span>
<span id="cb63-4"><a href="http://localhost:3348/#cb63-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> train_data, <span class="at">kernel =</span> <span class="st">"radial"</span>, <span class="at">cost =</span> <span class="dv">1</span>)</span>
<span id="cb63-5"><a href="http://localhost:3348/#cb63-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-6"><a href="http://localhost:3348/#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="co"># predictions</span></span>
<span id="cb63-7"><a href="http://localhost:3348/#cb63-7" aria-hidden="true" tabindex="-1"></a>svm_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(svm_model, <span class="at">newdata =</span> test_data)</span>
<span id="cb63-8"><a href="http://localhost:3348/#cb63-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-9"><a href="http://localhost:3348/#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="co"># confusion matrix</span></span>
<span id="cb63-10"><a href="http://localhost:3348/#cb63-10" aria-hidden="true" tabindex="-1"></a>svm_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(svm_pred, test_data<span class="sc">$</span>Staffing_Type)</span>
<span id="cb63-11"><a href="http://localhost:3348/#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(svm_cm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

               Reference
Prediction      CRNA_Only Mixed Resident_Only
  CRNA_Only           381     7            19
  Mixed                 0     0             0
  Resident_Only        13     9           101

Overall Statistics
                                          
               Accuracy : 0.9094          
                 95% CI : (0.8817, 0.9325)
    No Information Rate : 0.7434          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.7595          
                                          
 Mcnemar's Test P-Value : 0.0006661       

Statistics by Class:

                     Class: CRNA_Only Class: Mixed Class: Resident_Only
Sensitivity                    0.9670      0.00000               0.8417
Specificity                    0.8088      1.00000               0.9463
Pos Pred Value                 0.9361          NaN               0.8211
Neg Pred Value                 0.8943      0.96981               0.9533
Prevalence                     0.7434      0.03019               0.2264
Detection Rate                 0.7189      0.00000               0.1906
Detection Prevalence           0.7679      0.00000               0.2321
Balanced Accuracy              0.8879      0.50000               0.8940</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="http://localhost:3348/#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fit SVM with radial kernel</span></span>
<span id="cb65-2"><a href="http://localhost:3348/#cb65-2" aria-hidden="true" tabindex="-1"></a>svm_model <span class="ot">&lt;-</span> <span class="fu">svm</span>(Staffing_Type <span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Res_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> </span>
<span id="cb65-3"><a href="http://localhost:3348/#cb65-3" aria-hidden="true" tabindex="-1"></a>                   Hist_CRNA_Only_Rate <span class="sc">+</span> Hist_Mixed_Rate <span class="sc">+</span> Years_Experience,</span>
<span id="cb65-4"><a href="http://localhost:3348/#cb65-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> train_data, <span class="at">kernel =</span> <span class="st">"radial"</span>, <span class="at">cost =</span> <span class="dv">1</span>)</span>
<span id="cb65-5"><a href="http://localhost:3348/#cb65-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-6"><a href="http://localhost:3348/#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="co"># predictions</span></span>
<span id="cb65-7"><a href="http://localhost:3348/#cb65-7" aria-hidden="true" tabindex="-1"></a>svm_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(svm_model, <span class="at">newdata =</span> test_data)</span>
<span id="cb65-8"><a href="http://localhost:3348/#cb65-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-9"><a href="http://localhost:3348/#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="co"># confusion matrix</span></span>
<span id="cb65-10"><a href="http://localhost:3348/#cb65-10" aria-hidden="true" tabindex="-1"></a>svm_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(svm_pred, test_data<span class="sc">$</span>Staffing_Type)</span>
<span id="cb65-11"><a href="http://localhost:3348/#cb65-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(svm_cm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

               Reference
Prediction      CRNA_Only Mixed Resident_Only
  CRNA_Only           381     7            19
  Mixed                 0     0             0
  Resident_Only        13     9           101

Overall Statistics
                                          
               Accuracy : 0.9094          
                 95% CI : (0.8817, 0.9325)
    No Information Rate : 0.7434          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.7595          
                                          
 Mcnemar's Test P-Value : 0.0006661       

Statistics by Class:

                     Class: CRNA_Only Class: Mixed Class: Resident_Only
Sensitivity                    0.9670      0.00000               0.8417
Specificity                    0.8088      1.00000               0.9463
Pos Pred Value                 0.9361          NaN               0.8211
Neg Pred Value                 0.8943      0.96981               0.9533
Prevalence                     0.7434      0.03019               0.2264
Detection Rate                 0.7189      0.00000               0.1906
Detection Prevalence           0.7679      0.00000               0.2321
Balanced Accuracy              0.8879      0.50000               0.8940</code></pre>
</div>
</div>
</section>
<section id="staffing-type-model-comparison" class="level3">
<h3 class="anchored" data-anchor-id="staffing-type-model-comparison">Staffing Type Model Comparison<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#staffing-type-model-comparison" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="http://localhost:3348/#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compare all three models</span></span>
<span id="cb67-2"><a href="http://localhost:3348/#cb67-2" aria-hidden="true" tabindex="-1"></a>model1_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb67-3"><a href="http://localhost:3348/#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"Logistic Regression"</span>, <span class="st">"LDA"</span>, <span class="st">"SVM"</span>),</span>
<span id="cb67-4"><a href="http://localhost:3348/#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Accuracy =</span> <span class="fu">c</span>(log_cm<span class="sc">$</span>overall[<span class="st">"Accuracy"</span>],</span>
<span id="cb67-5"><a href="http://localhost:3348/#cb67-5" aria-hidden="true" tabindex="-1"></a>               lda_cm<span class="sc">$</span>overall[<span class="st">"Accuracy"</span>],</span>
<span id="cb67-6"><a href="http://localhost:3348/#cb67-6" aria-hidden="true" tabindex="-1"></a>               svm_cm<span class="sc">$</span>overall[<span class="st">"Accuracy"</span>]),</span>
<span id="cb67-7"><a href="http://localhost:3348/#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Kappa =</span> <span class="fu">c</span>(log_cm<span class="sc">$</span>overall[<span class="st">"Kappa"</span>],</span>
<span id="cb67-8"><a href="http://localhost:3348/#cb67-8" aria-hidden="true" tabindex="-1"></a>            lda_cm<span class="sc">$</span>overall[<span class="st">"Kappa"</span>],</span>
<span id="cb67-9"><a href="http://localhost:3348/#cb67-9" aria-hidden="true" tabindex="-1"></a>            svm_cm<span class="sc">$</span>overall[<span class="st">"Kappa"</span>])</span>
<span id="cb67-10"><a href="http://localhost:3348/#cb67-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb67-11"><a href="http://localhost:3348/#cb67-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-12"><a href="http://localhost:3348/#cb67-12" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(model1_results, <span class="at">digits =</span> <span class="dv">4</span>, </span>
<span id="cb67-13"><a href="http://localhost:3348/#cb67-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Model"</span>, <span class="st">"Accuracy"</span>, <span class="st">"Kappa"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Model</th>
<th style="text-align: right;">Accuracy</th>
<th style="text-align: right;">Kappa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Logistic Regression</td>
<td style="text-align: right;">0.9094</td>
<td style="text-align: right;">0.7595</td>
</tr>
<tr class="even">
<td style="text-align: left;">LDA</td>
<td style="text-align: right;">0.9094</td>
<td style="text-align: right;">0.7595</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SVM</td>
<td style="text-align: right;">0.9094</td>
<td style="text-align: right;">0.7595</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="team-size-preference-model" class="level2">
<h2 class="anchored" data-anchor-id="team-size-preference-model">Team Size Preference Model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#team-size-preference-model" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>This model predicts whether a faculty member will use a small, medium, or large team.</p>
<section id="multinomial-logistic-regression-1" class="level3">
<h3 class="anchored" data-anchor-id="multinomial-logistic-regression-1">Multinomial Logistic Regression<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#multinomial-logistic-regression-1" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="http://localhost:3348/#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fit multinomial logistic regression for team size</span></span>
<span id="cb68-2"><a href="http://localhost:3348/#cb68-2" aria-hidden="true" tabindex="-1"></a>log_model2 <span class="ot">&lt;-</span> <span class="fu">multinom</span>(Team_Size_Category <span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Res_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> </span>
<span id="cb68-3"><a href="http://localhost:3348/#cb68-3" aria-hidden="true" tabindex="-1"></a>                         WeekdayNum <span class="sc">+</span> Hist_Avg_Team_Size <span class="sc">+</span> Years_Experience <span class="sc">+</span> Staffing_Type,</span>
<span id="cb68-4"><a href="http://localhost:3348/#cb68-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">data =</span> train_data, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb68-5"><a href="http://localhost:3348/#cb68-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-6"><a href="http://localhost:3348/#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="co"># predictions</span></span>
<span id="cb68-7"><a href="http://localhost:3348/#cb68-7" aria-hidden="true" tabindex="-1"></a>log_pred2 <span class="ot">&lt;-</span> <span class="fu">predict</span>(log_model2, <span class="at">newdata =</span> test_data)</span>
<span id="cb68-8"><a href="http://localhost:3348/#cb68-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-9"><a href="http://localhost:3348/#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="co"># confusion matrix</span></span>
<span id="cb68-10"><a href="http://localhost:3348/#cb68-10" aria-hidden="true" tabindex="-1"></a>log_cm2 <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(log_pred2, test_data<span class="sc">$</span>Team_Size_Category)</span>
<span id="cb68-11"><a href="http://localhost:3348/#cb68-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(log_cm2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction Small Medium Large
    Small    124     12     0
    Medium    27    363     4
    Large      0      0     0

Overall Statistics
                                          
               Accuracy : 0.9189          
                 95% CI : (0.8923, 0.9407)
    No Information Rate : 0.7075          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.7976          
                                          
 Mcnemar's Test P-Value : NA              

Statistics by Class:

                     Class: Small Class: Medium Class: Large
Sensitivity                0.8212        0.9680     0.000000
Specificity                0.9683        0.8000     1.000000
Pos Pred Value             0.9118        0.9213          NaN
Neg Pred Value             0.9315        0.9118     0.992453
Prevalence                 0.2849        0.7075     0.007547
Detection Rate             0.2340        0.6849     0.000000
Detection Prevalence       0.2566        0.7434     0.000000
Balanced Accuracy          0.8948        0.8840     0.500000</code></pre>
</div>
</div>
</section>
<section id="linear-discriminant-analysis-1" class="level3">
<h3 class="anchored" data-anchor-id="linear-discriminant-analysis-1">Linear Discriminant Analysis<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#linear-discriminant-analysis-1" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="http://localhost:3348/#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fit LDA for team size</span></span>
<span id="cb70-2"><a href="http://localhost:3348/#cb70-2" aria-hidden="true" tabindex="-1"></a>lda_model2 <span class="ot">&lt;-</span> <span class="fu">lda</span>(Team_Size_Category <span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Res_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> </span>
<span id="cb70-3"><a href="http://localhost:3348/#cb70-3" aria-hidden="true" tabindex="-1"></a>                    WeekdayNum <span class="sc">+</span> Hist_Avg_Team_Size <span class="sc">+</span> Years_Experience <span class="sc">+</span> Staffing_Type,</span>
<span id="cb70-4"><a href="http://localhost:3348/#cb70-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">data =</span> train_data)</span>
<span id="cb70-5"><a href="http://localhost:3348/#cb70-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-6"><a href="http://localhost:3348/#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co"># predictions</span></span>
<span id="cb70-7"><a href="http://localhost:3348/#cb70-7" aria-hidden="true" tabindex="-1"></a>lda_pred2 <span class="ot">&lt;-</span> <span class="fu">predict</span>(lda_model2, <span class="at">newdata =</span> test_data)<span class="sc">$</span>class</span>
<span id="cb70-8"><a href="http://localhost:3348/#cb70-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-9"><a href="http://localhost:3348/#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="co"># confusion matrix</span></span>
<span id="cb70-10"><a href="http://localhost:3348/#cb70-10" aria-hidden="true" tabindex="-1"></a>lda_cm2 <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(lda_pred2, test_data<span class="sc">$</span>Team_Size_Category)</span>
<span id="cb70-11"><a href="http://localhost:3348/#cb70-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lda_cm2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction Small Medium Large
    Small    124     12     0
    Medium    27    363     4
    Large      0      0     0

Overall Statistics
                                          
               Accuracy : 0.9189          
                 95% CI : (0.8923, 0.9407)
    No Information Rate : 0.7075          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.7976          
                                          
 Mcnemar's Test P-Value : NA              

Statistics by Class:

                     Class: Small Class: Medium Class: Large
Sensitivity                0.8212        0.9680     0.000000
Specificity                0.9683        0.8000     1.000000
Pos Pred Value             0.9118        0.9213          NaN
Neg Pred Value             0.9315        0.9118     0.992453
Prevalence                 0.2849        0.7075     0.007547
Detection Rate             0.2340        0.6849     0.000000
Detection Prevalence       0.2566        0.7434     0.000000
Balanced Accuracy          0.8948        0.8840     0.500000</code></pre>
</div>
</div>
</section>
<section id="support-vector-machine-1" class="level3">
<h3 class="anchored" data-anchor-id="support-vector-machine-1">Support Vector Machine<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#support-vector-machine-1" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="http://localhost:3348/#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fit SVM for team size</span></span>
<span id="cb72-2"><a href="http://localhost:3348/#cb72-2" aria-hidden="true" tabindex="-1"></a>svm_model2 <span class="ot">&lt;-</span> <span class="fu">svm</span>(Team_Size_Category <span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Res_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> </span>
<span id="cb72-3"><a href="http://localhost:3348/#cb72-3" aria-hidden="true" tabindex="-1"></a>                    WeekdayNum <span class="sc">+</span> Hist_Avg_Team_Size <span class="sc">+</span> Years_Experience <span class="sc">+</span> Staffing_Type,</span>
<span id="cb72-4"><a href="http://localhost:3348/#cb72-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">data =</span> train_data, <span class="at">kernel =</span> <span class="st">"radial"</span>, <span class="at">cost =</span> <span class="dv">1</span>)</span>
<span id="cb72-5"><a href="http://localhost:3348/#cb72-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-6"><a href="http://localhost:3348/#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="co"># predictions</span></span>
<span id="cb72-7"><a href="http://localhost:3348/#cb72-7" aria-hidden="true" tabindex="-1"></a>svm_pred2 <span class="ot">&lt;-</span> <span class="fu">predict</span>(svm_model2, <span class="at">newdata =</span> test_data)</span>
<span id="cb72-8"><a href="http://localhost:3348/#cb72-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-9"><a href="http://localhost:3348/#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="co"># confusion matrix</span></span>
<span id="cb72-10"><a href="http://localhost:3348/#cb72-10" aria-hidden="true" tabindex="-1"></a>svm_cm2 <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(svm_pred2, test_data<span class="sc">$</span>Team_Size_Category)</span>
<span id="cb72-11"><a href="http://localhost:3348/#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(svm_cm2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction Small Medium Large
    Small    124     12     0
    Medium    27    363     4
    Large      0      0     0

Overall Statistics
                                          
               Accuracy : 0.9189          
                 95% CI : (0.8923, 0.9407)
    No Information Rate : 0.7075          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.7976          
                                          
 Mcnemar's Test P-Value : NA              

Statistics by Class:

                     Class: Small Class: Medium Class: Large
Sensitivity                0.8212        0.9680     0.000000
Specificity                0.9683        0.8000     1.000000
Pos Pred Value             0.9118        0.9213          NaN
Neg Pred Value             0.9315        0.9118     0.992453
Prevalence                 0.2849        0.7075     0.007547
Detection Rate             0.2340        0.6849     0.000000
Detection Prevalence       0.2566        0.7434     0.000000
Balanced Accuracy          0.8948        0.8840     0.500000</code></pre>
</div>
</div>
</section>
<section id="team-size-model-comparison" class="level3">
<h3 class="anchored" data-anchor-id="team-size-model-comparison">Team Size Model Comparison<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#team-size-model-comparison" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="http://localhost:3348/#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compare all three models</span></span>
<span id="cb74-2"><a href="http://localhost:3348/#cb74-2" aria-hidden="true" tabindex="-1"></a>model2_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb74-3"><a href="http://localhost:3348/#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"Logistic Regression"</span>, <span class="st">"LDA"</span>, <span class="st">"SVM"</span>),</span>
<span id="cb74-4"><a href="http://localhost:3348/#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Accuracy =</span> <span class="fu">c</span>(log_cm2<span class="sc">$</span>overall[<span class="st">"Accuracy"</span>],</span>
<span id="cb74-5"><a href="http://localhost:3348/#cb74-5" aria-hidden="true" tabindex="-1"></a>               lda_cm2<span class="sc">$</span>overall[<span class="st">"Accuracy"</span>],</span>
<span id="cb74-6"><a href="http://localhost:3348/#cb74-6" aria-hidden="true" tabindex="-1"></a>               svm_cm2<span class="sc">$</span>overall[<span class="st">"Accuracy"</span>]),</span>
<span id="cb74-7"><a href="http://localhost:3348/#cb74-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Kappa =</span> <span class="fu">c</span>(log_cm2<span class="sc">$</span>overall[<span class="st">"Kappa"</span>],</span>
<span id="cb74-8"><a href="http://localhost:3348/#cb74-8" aria-hidden="true" tabindex="-1"></a>            lda_cm2<span class="sc">$</span>overall[<span class="st">"Kappa"</span>],</span>
<span id="cb74-9"><a href="http://localhost:3348/#cb74-9" aria-hidden="true" tabindex="-1"></a>            svm_cm2<span class="sc">$</span>overall[<span class="st">"Kappa"</span>])</span>
<span id="cb74-10"><a href="http://localhost:3348/#cb74-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb74-11"><a href="http://localhost:3348/#cb74-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-12"><a href="http://localhost:3348/#cb74-12" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(model2_results, <span class="at">digits =</span> <span class="dv">4</span>,</span>
<span id="cb74-13"><a href="http://localhost:3348/#cb74-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Model"</span>, <span class="st">"Accuracy"</span>, <span class="st">"Kappa"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Model</th>
<th style="text-align: right;">Accuracy</th>
<th style="text-align: right;">Kappa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Logistic Regression</td>
<td style="text-align: right;">0.9189</td>
<td style="text-align: right;">0.7976</td>
</tr>
<tr class="even">
<td style="text-align: left;">LDA</td>
<td style="text-align: right;">0.9189</td>
<td style="text-align: right;">0.7976</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SVM</td>
<td style="text-align: right;">0.9189</td>
<td style="text-align: right;">0.7976</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="specific-staff-preference-model" class="level2">
<h2 class="anchored" data-anchor-id="specific-staff-preference-model">Specific Staff Preference Model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#specific-staff-preference-model" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>This model predicts which specific CRNAs a faculty member prefers to work with. Due to the highly imbalanced nature of this data, we focus on the top 15 most frequently scheduled CRNAs.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="http://localhost:3348/#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 15 CRNAs</span></span>
<span id="cb75-2"><a href="http://localhost:3348/#cb75-2" aria-hidden="true" tabindex="-1"></a>top_crnas <span class="ot">&lt;-</span> crna_counts<span class="sc">$</span>CRNA[<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>]</span>
<span id="cb75-3"><a href="http://localhost:3348/#cb75-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-4"><a href="http://localhost:3348/#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create subset with CRNA columns for this model</span></span>
<span id="cb75-5"><a href="http://localhost:3348/#cb75-5" aria-hidden="true" tabindex="-1"></a>keep_cols3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Faculty"</span>, <span class="st">"Avg_CRNA_Count"</span>, <span class="st">"Avg_Room_Count"</span>, <span class="st">"Hist_Avg_CRNA"</span>, top_crnas)</span>
<span id="cb75-6"><a href="http://localhost:3348/#cb75-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-7"><a href="http://localhost:3348/#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="co"># only keep columns that exist in the data</span></span>
<span id="cb75-8"><a href="http://localhost:3348/#cb75-8" aria-hidden="true" tabindex="-1"></a>keep_cols3 <span class="ot">&lt;-</span> keep_cols3[keep_cols3 <span class="sc">%in%</span> <span class="fu">names</span>(data)]</span>
<span id="cb75-9"><a href="http://localhost:3348/#cb75-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-10"><a href="http://localhost:3348/#cb75-10" aria-hidden="true" tabindex="-1"></a>model3_data <span class="ot">&lt;-</span> data[, keep_cols3]</span>
<span id="cb75-11"><a href="http://localhost:3348/#cb75-11" aria-hidden="true" tabindex="-1"></a>model3_data <span class="ot">&lt;-</span> model3_data <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span>
<span id="cb75-12"><a href="http://localhost:3348/#cb75-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-13"><a href="http://localhost:3348/#cb75-13" aria-hidden="true" tabindex="-1"></a><span class="co"># split data</span></span>
<span id="cb75-14"><a href="http://localhost:3348/#cb75-14" aria-hidden="true" tabindex="-1"></a>train_size3 <span class="ot">&lt;-</span> <span class="fu">floor</span>(<span class="fl">0.8</span> <span class="sc">*</span> <span class="fu">nrow</span>(model3_data))</span>
<span id="cb75-15"><a href="http://localhost:3348/#cb75-15" aria-hidden="true" tabindex="-1"></a>train_data3 <span class="ot">&lt;-</span> model3_data[<span class="dv">1</span><span class="sc">:</span>train_size3, ]</span>
<span id="cb75-16"><a href="http://localhost:3348/#cb75-16" aria-hidden="true" tabindex="-1"></a>test_data3 <span class="ot">&lt;-</span> model3_data[(train_size3 <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span><span class="fu">nrow</span>(model3_data), ]</span>
<span id="cb75-17"><a href="http://localhost:3348/#cb75-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-18"><a href="http://localhost:3348/#cb75-18" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Modeling preferences for top 15 CRNAs</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Modeling preferences for top 15 CRNAs</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="http://localhost:3348/#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Training size:"</span>, <span class="fu">nrow</span>(train_data3), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Training size: 2116 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="http://localhost:3348/#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Test size:"</span>, <span class="fu">nrow</span>(test_data3), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Test size: 530 </code></pre>
</div>
</div>
<section id="multi-label-classification-results" class="level3">
<h3 class="anchored" data-anchor-id="multi-label-classification-results">Multi-label Classification Results<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#multi-label-classification-results" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="http://localhost:3348/#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># store results for each CRNA</span></span>
<span id="cb81-2"><a href="http://localhost:3348/#cb81-2" aria-hidden="true" tabindex="-1"></a>crna_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb81-3"><a href="http://localhost:3348/#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">CRNA =</span> <span class="fu">character</span>(),</span>
<span id="cb81-4"><a href="http://localhost:3348/#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Logistic_Accuracy =</span> <span class="fu">numeric</span>(),</span>
<span id="cb81-5"><a href="http://localhost:3348/#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">SVM_Accuracy =</span> <span class="fu">numeric</span>(),</span>
<span id="cb81-6"><a href="http://localhost:3348/#cb81-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Baseline_Accuracy =</span> <span class="fu">numeric</span>(),</span>
<span id="cb81-7"><a href="http://localhost:3348/#cb81-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb81-8"><a href="http://localhost:3348/#cb81-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb81-9"><a href="http://localhost:3348/#cb81-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-10"><a href="http://localhost:3348/#cb81-10" aria-hidden="true" tabindex="-1"></a><span class="co"># model each CRNA separately</span></span>
<span id="cb81-11"><a href="http://localhost:3348/#cb81-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">min</span>(<span class="dv">10</span>, <span class="fu">length</span>(top_crnas))) {</span>
<span id="cb81-12"><a href="http://localhost:3348/#cb81-12" aria-hidden="true" tabindex="-1"></a>  crna <span class="ot">&lt;-</span> top_crnas[i]</span>
<span id="cb81-13"><a href="http://localhost:3348/#cb81-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb81-14"><a href="http://localhost:3348/#cb81-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create binary target</span></span>
<span id="cb81-15"><a href="http://localhost:3348/#cb81-15" aria-hidden="true" tabindex="-1"></a>  train_target <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(train_data3[[crna]] <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-16"><a href="http://localhost:3348/#cb81-16" aria-hidden="true" tabindex="-1"></a>  test_target <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(test_data3[[crna]] <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-17"><a href="http://localhost:3348/#cb81-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb81-18"><a href="http://localhost:3348/#cb81-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># check class balance</span></span>
<span id="cb81-19"><a href="http://localhost:3348/#cb81-19" aria-hidden="true" tabindex="-1"></a>  train_positive <span class="ot">&lt;-</span> <span class="fu">sum</span>(train_target <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-20"><a href="http://localhost:3348/#cb81-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb81-21"><a href="http://localhost:3348/#cb81-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># skip if too imbalanced</span></span>
<span id="cb81-22"><a href="http://localhost:3348/#cb81-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (train_positive <span class="sc">&lt;</span> <span class="dv">10</span>) {</span>
<span id="cb81-23"><a href="http://localhost:3348/#cb81-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span></span>
<span id="cb81-24"><a href="http://localhost:3348/#cb81-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb81-25"><a href="http://localhost:3348/#cb81-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb81-26"><a href="http://localhost:3348/#cb81-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># baseline accuracy</span></span>
<span id="cb81-27"><a href="http://localhost:3348/#cb81-27" aria-hidden="true" tabindex="-1"></a>  baseline_acc <span class="ot">&lt;-</span> <span class="fu">max</span>(<span class="fu">table</span>(train_target)) <span class="sc">/</span> <span class="fu">length</span>(train_target)</span>
<span id="cb81-28"><a href="http://localhost:3348/#cb81-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb81-29"><a href="http://localhost:3348/#cb81-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create training dataframe</span></span>
<span id="cb81-30"><a href="http://localhost:3348/#cb81-30" aria-hidden="true" tabindex="-1"></a>  train_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb81-31"><a href="http://localhost:3348/#cb81-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">target =</span> train_target,</span>
<span id="cb81-32"><a href="http://localhost:3348/#cb81-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_CRNA_Count =</span> train_data3<span class="sc">$</span>Avg_CRNA_Count,</span>
<span id="cb81-33"><a href="http://localhost:3348/#cb81-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_Room_Count =</span> train_data3<span class="sc">$</span>Avg_Room_Count,</span>
<span id="cb81-34"><a href="http://localhost:3348/#cb81-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hist_Avg_CRNA =</span> train_data3<span class="sc">$</span>Hist_Avg_CRNA</span>
<span id="cb81-35"><a href="http://localhost:3348/#cb81-35" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-36"><a href="http://localhost:3348/#cb81-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb81-37"><a href="http://localhost:3348/#cb81-37" aria-hidden="true" tabindex="-1"></a>  test_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb81-38"><a href="http://localhost:3348/#cb81-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">target =</span> test_target,</span>
<span id="cb81-39"><a href="http://localhost:3348/#cb81-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_CRNA_Count =</span> test_data3<span class="sc">$</span>Avg_CRNA_Count,</span>
<span id="cb81-40"><a href="http://localhost:3348/#cb81-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_Room_Count =</span> test_data3<span class="sc">$</span>Avg_Room_Count,</span>
<span id="cb81-41"><a href="http://localhost:3348/#cb81-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hist_Avg_CRNA =</span> test_data3<span class="sc">$</span>Hist_Avg_CRNA</span>
<span id="cb81-42"><a href="http://localhost:3348/#cb81-42" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-43"><a href="http://localhost:3348/#cb81-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb81-44"><a href="http://localhost:3348/#cb81-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># logistic regression</span></span>
<span id="cb81-45"><a href="http://localhost:3348/#cb81-45" aria-hidden="true" tabindex="-1"></a>  log_m3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(target <span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> Hist_Avg_CRNA,</span>
<span id="cb81-46"><a href="http://localhost:3348/#cb81-46" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> train_df, <span class="at">family =</span> binomial)</span>
<span id="cb81-47"><a href="http://localhost:3348/#cb81-47" aria-hidden="true" tabindex="-1"></a>  log_prob <span class="ot">&lt;-</span> <span class="fu">predict</span>(log_m3, <span class="at">newdata =</span> test_df, <span class="at">type =</span> <span class="st">"response"</span>)</span>
<span id="cb81-48"><a href="http://localhost:3348/#cb81-48" aria-hidden="true" tabindex="-1"></a>  log_pred3 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(log_prob <span class="sc">&gt;</span> <span class="fl">0.5</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb81-49"><a href="http://localhost:3348/#cb81-49" aria-hidden="true" tabindex="-1"></a>  log_acc <span class="ot">&lt;-</span> <span class="fu">mean</span>(log_pred3 <span class="sc">==</span> test_target)</span>
<span id="cb81-50"><a href="http://localhost:3348/#cb81-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb81-51"><a href="http://localhost:3348/#cb81-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># SVM</span></span>
<span id="cb81-52"><a href="http://localhost:3348/#cb81-52" aria-hidden="true" tabindex="-1"></a>  svm_m3 <span class="ot">&lt;-</span> <span class="fu">svm</span>(target <span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> Hist_Avg_CRNA,</span>
<span id="cb81-53"><a href="http://localhost:3348/#cb81-53" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> train_df, <span class="at">kernel =</span> <span class="st">"radial"</span>, <span class="at">cost =</span> <span class="dv">1</span>)</span>
<span id="cb81-54"><a href="http://localhost:3348/#cb81-54" aria-hidden="true" tabindex="-1"></a>  svm_pred3 <span class="ot">&lt;-</span> <span class="fu">predict</span>(svm_m3, <span class="at">newdata =</span> test_df)</span>
<span id="cb81-55"><a href="http://localhost:3348/#cb81-55" aria-hidden="true" tabindex="-1"></a>  svm_acc <span class="ot">&lt;-</span> <span class="fu">mean</span>(svm_pred3 <span class="sc">==</span> test_target)</span>
<span id="cb81-56"><a href="http://localhost:3348/#cb81-56" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb81-57"><a href="http://localhost:3348/#cb81-57" aria-hidden="true" tabindex="-1"></a>  crna_results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(crna_results, <span class="fu">data.frame</span>(</span>
<span id="cb81-58"><a href="http://localhost:3348/#cb81-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">CRNA =</span> crna,</span>
<span id="cb81-59"><a href="http://localhost:3348/#cb81-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">Logistic_Accuracy =</span> <span class="fu">round</span>(log_acc, <span class="dv">4</span>),</span>
<span id="cb81-60"><a href="http://localhost:3348/#cb81-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">SVM_Accuracy =</span> <span class="fu">round</span>(svm_acc, <span class="dv">4</span>),</span>
<span id="cb81-61"><a href="http://localhost:3348/#cb81-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">Baseline_Accuracy =</span> <span class="fu">round</span>(baseline_acc, <span class="dv">4</span>)</span>
<span id="cb81-62"><a href="http://localhost:3348/#cb81-62" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb81-63"><a href="http://localhost:3348/#cb81-63" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb81-64"><a href="http://localhost:3348/#cb81-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-65"><a href="http://localhost:3348/#cb81-65" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(crna_results, </span>
<span id="cb81-66"><a href="http://localhost:3348/#cb81-66" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"CRNA"</span>, <span class="st">"Logistic Accuracy"</span>, <span class="st">"SVM Accuracy"</span>, <span class="st">"Baseline Accuracy"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">CRNA</th>
<th style="text-align: right;">Logistic Accuracy</th>
<th style="text-align: right;">SVM Accuracy</th>
<th style="text-align: right;">Baseline Accuracy</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CRNA_CRNA27</td>
<td style="text-align: right;">0.9811</td>
<td style="text-align: right;">0.9811</td>
<td style="text-align: right;">0.9480</td>
</tr>
<tr class="even">
<td style="text-align: left;">CRNA_CRNA50</td>
<td style="text-align: right;">0.9660</td>
<td style="text-align: right;">0.9660</td>
<td style="text-align: right;">0.9546</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CRNA_CRNA71</td>
<td style="text-align: right;">0.9566</td>
<td style="text-align: right;">0.9566</td>
<td style="text-align: right;">0.9575</td>
</tr>
<tr class="even">
<td style="text-align: left;">CRNA_CRNA70</td>
<td style="text-align: right;">0.9472</td>
<td style="text-align: right;">0.9472</td>
<td style="text-align: right;">0.9579</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CRNA_CRNA35</td>
<td style="text-align: right;">0.9415</td>
<td style="text-align: right;">0.9415</td>
<td style="text-align: right;">0.9612</td>
</tr>
<tr class="even">
<td style="text-align: left;">CRNA_CRNA82</td>
<td style="text-align: right;">0.9302</td>
<td style="text-align: right;">0.9302</td>
<td style="text-align: right;">0.9646</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CRNA_CRNA69</td>
<td style="text-align: right;">0.9472</td>
<td style="text-align: right;">0.9472</td>
<td style="text-align: right;">0.9617</td>
</tr>
<tr class="even">
<td style="text-align: left;">CRNA_CRNA30</td>
<td style="text-align: right;">0.9509</td>
<td style="text-align: right;">0.9509</td>
<td style="text-align: right;">0.9617</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CRNA_CRNAT</td>
<td style="text-align: right;">0.9528</td>
<td style="text-align: right;">0.9528</td>
<td style="text-align: right;">0.9622</td>
</tr>
<tr class="even">
<td style="text-align: left;">CRNA_CRNA43</td>
<td style="text-align: right;">0.9547</td>
<td style="text-align: right;">0.9547</td>
<td style="text-align: right;">0.9622</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="staff-preference-model-discussion" class="level3">
<h3 class="anchored" data-anchor-id="staff-preference-model-discussion">Staff Preference Model Discussion<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#staff-preference-model-discussion" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="http://localhost:3348/#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># average performance</span></span>
<span id="cb82-2"><a href="http://localhost:3348/#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">nrow</span>(crna_results) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb82-3"><a href="http://localhost:3348/#cb82-3" aria-hidden="true" tabindex="-1"></a>  avg_log <span class="ot">&lt;-</span> <span class="fu">mean</span>(crna_results<span class="sc">$</span>Logistic_Accuracy, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb82-4"><a href="http://localhost:3348/#cb82-4" aria-hidden="true" tabindex="-1"></a>  avg_svm <span class="ot">&lt;-</span> <span class="fu">mean</span>(crna_results<span class="sc">$</span>SVM_Accuracy, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb82-5"><a href="http://localhost:3348/#cb82-5" aria-hidden="true" tabindex="-1"></a>  avg_baseline <span class="ot">&lt;-</span> <span class="fu">mean</span>(crna_results<span class="sc">$</span>Baseline_Accuracy, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb82-6"><a href="http://localhost:3348/#cb82-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb82-7"><a href="http://localhost:3348/#cb82-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Average Logistic Regression Accuracy:"</span>, <span class="fu">round</span>(avg_log, <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb82-8"><a href="http://localhost:3348/#cb82-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Average SVM Accuracy:"</span>, <span class="fu">round</span>(avg_svm, <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb82-9"><a href="http://localhost:3348/#cb82-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Average Baseline Accuracy:"</span>, <span class="fu">round</span>(avg_baseline, <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb82-10"><a href="http://localhost:3348/#cb82-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Average Logistic Regression Accuracy: 0.9528 
Average SVM Accuracy: 0.9528 
Average Baseline Accuracy: 0.9592 </code></pre>
</div>
</div>
<p>The individual CRNA prediction task is challenging due to the extreme class imbalance. Most CRNAs work with any given faculty member less than 10% of the time. Both logistic regression and SVM struggle to substantially outperform the baseline accuracy, which highlights the inherent difficulty of this prediction task.</p>
</section>
</section>
<section id="faculty-crna-pairing-analysis" class="level2">
<h2 class="anchored" data-anchor-id="faculty-crna-pairing-analysis">Faculty-CRNA Pairing Analysis<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3348/#faculty-crna-pairing-analysis" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="http://localhost:3348/#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># manually specify faculty to include (swap FacultyI for FacultyJ)</span></span>
<span id="cb84-2"><a href="http://localhost:3348/#cb84-2" aria-hidden="true" tabindex="-1"></a>top_faculty <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"FacultyN"</span>, <span class="st">"Faculty48"</span>, <span class="st">"FacultyD"</span>, <span class="st">"FacultyX"</span>, <span class="st">"Faculty49"</span>, </span>
<span id="cb84-3"><a href="http://localhost:3348/#cb84-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"FacultyB"</span>, <span class="st">"Faculty47"</span>, <span class="st">"FacultyJ"</span>, </span>
<span id="cb84-4"><a href="http://localhost:3348/#cb84-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"FacultyQ"</span>, <span class="st">"Faculty50"</span>)</span>
<span id="cb84-5"><a href="http://localhost:3348/#cb84-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-6"><a href="http://localhost:3348/#cb84-6" aria-hidden="true" tabindex="-1"></a><span class="co"># or if you want to keep the filter approach but ensure FacultyJ is included:</span></span>
<span id="cb84-7"><a href="http://localhost:3348/#cb84-7" aria-hidden="true" tabindex="-1"></a><span class="co"># top_faculty &lt;- faculty_prefs %&gt;%</span></span>
<span id="cb84-8"><a href="http://localhost:3348/#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(Total_Shifts &gt;= 30) %&gt;%</span></span>
<span id="cb84-9"><a href="http://localhost:3348/#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(Faculty != "FacultyI") %&gt;%  # remove FacultyI</span></span>
<span id="cb84-10"><a href="http://localhost:3348/#cb84-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   head(10) %&gt;%</span></span>
<span id="cb84-11"><a href="http://localhost:3348/#cb84-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   pull(Faculty)</span></span>
<span id="cb84-12"><a href="http://localhost:3348/#cb84-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-13"><a href="http://localhost:3348/#cb84-13" aria-hidden="true" tabindex="-1"></a><span class="co"># add FacultyJ if not already there</span></span>
<span id="cb84-14"><a href="http://localhost:3348/#cb84-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="st">"FacultyJ"</span> <span class="sc">%in%</span> top_faculty) {</span>
<span id="cb84-15"><a href="http://localhost:3348/#cb84-15" aria-hidden="true" tabindex="-1"></a>  top_faculty <span class="ot">&lt;-</span> <span class="fu">c</span>(top_faculty, <span class="st">"FacultyJ"</span>)</span>
<span id="cb84-16"><a href="http://localhost:3348/#cb84-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb84-17"><a href="http://localhost:3348/#cb84-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-18"><a href="http://localhost:3348/#cb84-18" aria-hidden="true" tabindex="-1"></a><span class="co"># create pairing matrix</span></span>
<span id="cb84-19"><a href="http://localhost:3348/#cb84-19" aria-hidden="true" tabindex="-1"></a>pairing_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> <span class="fu">length</span>(top_faculty), <span class="at">ncol =</span> <span class="fu">min</span>(<span class="dv">10</span>, <span class="fu">length</span>(top_crnas)))</span>
<span id="cb84-20"><a href="http://localhost:3348/#cb84-20" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(pairing_matrix) <span class="ot">&lt;-</span> top_faculty</span>
<span id="cb84-21"><a href="http://localhost:3348/#cb84-21" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(pairing_matrix) <span class="ot">&lt;-</span> top_crnas[<span class="dv">1</span><span class="sc">:</span><span class="fu">min</span>(<span class="dv">10</span>, <span class="fu">length</span>(top_crnas))]</span>
<span id="cb84-22"><a href="http://localhost:3348/#cb84-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-23"><a href="http://localhost:3348/#cb84-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(top_faculty)) {</span>
<span id="cb84-24"><a href="http://localhost:3348/#cb84-24" aria-hidden="true" tabindex="-1"></a>  fac <span class="ot">&lt;-</span> top_faculty[i]</span>
<span id="cb84-25"><a href="http://localhost:3348/#cb84-25" aria-hidden="true" tabindex="-1"></a>  fac_data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Faculty <span class="sc">==</span> fac)</span>
<span id="cb84-26"><a href="http://localhost:3348/#cb84-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb84-27"><a href="http://localhost:3348/#cb84-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">min</span>(<span class="dv">10</span>, <span class="fu">length</span>(top_crnas))) {</span>
<span id="cb84-28"><a href="http://localhost:3348/#cb84-28" aria-hidden="true" tabindex="-1"></a>    crna <span class="ot">&lt;-</span> top_crnas[j]</span>
<span id="cb84-29"><a href="http://localhost:3348/#cb84-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (crna <span class="sc">%in%</span> <span class="fu">names</span>(fac_data)) {</span>
<span id="cb84-30"><a href="http://localhost:3348/#cb84-30" aria-hidden="true" tabindex="-1"></a>      pairing_matrix[i, j] <span class="ot">&lt;-</span> <span class="fu">sum</span>(fac_data[[crna]] <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">nrow</span>(fac_data) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb84-31"><a href="http://localhost:3348/#cb84-31" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb84-32"><a href="http://localhost:3348/#cb84-32" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb84-33"><a href="http://localhost:3348/#cb84-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb84-34"><a href="http://localhost:3348/#cb84-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-35"><a href="http://localhost:3348/#cb84-35" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to dataframe for plotting</span></span>
<span id="cb84-36"><a href="http://localhost:3348/#cb84-36" aria-hidden="true" tabindex="-1"></a>pairing_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(pairing_matrix) <span class="sc">%&gt;%</span></span>
<span id="cb84-37"><a href="http://localhost:3348/#cb84-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">"Faculty"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb84-38"><a href="http://localhost:3348/#cb84-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>Faculty, <span class="at">names_to =</span> <span class="st">"CRNA"</span>, <span class="at">values_to =</span> <span class="st">"Percentage"</span>)</span>
<span id="cb84-39"><a href="http://localhost:3348/#cb84-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-40"><a href="http://localhost:3348/#cb84-40" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pairing_df, <span class="fu">aes</span>(<span class="at">x =</span> CRNA, <span class="at">y =</span> Faculty, <span class="at">fill =</span> Percentage)) <span class="sc">+</span></span>
<span id="cb84-41"><a href="http://localhost:3348/#cb84-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb84-42"><a href="http://localhost:3348/#cb84-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb84-43"><a href="http://localhost:3348/#cb84-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Faculty-CRNA Pairing Frequency"</span>,</span>
<span id="cb84-44"><a href="http://localhost:3348/#cb84-44" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Percentage of shifts where faculty worked with each CRNA"</span>,</span>
<span id="cb84-45"><a href="http://localhost:3348/#cb84-45" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"CRNA"</span>,</span>
<span id="cb84-46"><a href="http://localhost:3348/#cb84-46" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Faculty"</span>,</span>
<span id="cb84-47"><a href="http://localhost:3348/#cb84-47" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"% of Shifts"</span>) <span class="sc">+</span></span>
<span id="cb84-48"><a href="http://localhost:3348/#cb84-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">7</span>),</span>
<span id="cb84-49"><a href="http://localhost:3348/#cb84-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Faculty Scheduling Predicting Staffing Preferences_files/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="http://localhost:3348/#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 3 further attempt</span></span>
<span id="cb85-2"><a href="http://localhost:3348/#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="co"># store results for each CRNA</span></span>
<span id="cb85-3"><a href="http://localhost:3348/#cb85-3" aria-hidden="true" tabindex="-1"></a>crna_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb85-4"><a href="http://localhost:3348/#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">CRNA =</span> <span class="fu">character</span>(),</span>
<span id="cb85-5"><a href="http://localhost:3348/#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Ridge_Accuracy =</span> <span class="fu">numeric</span>(),</span>
<span id="cb85-6"><a href="http://localhost:3348/#cb85-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Ridge_Sensitivity =</span> <span class="fu">numeric</span>(),</span>
<span id="cb85-7"><a href="http://localhost:3348/#cb85-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">SVM_Accuracy =</span> <span class="fu">numeric</span>(),</span>
<span id="cb85-8"><a href="http://localhost:3348/#cb85-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">SVM_Sensitivity =</span> <span class="fu">numeric</span>(),</span>
<span id="cb85-9"><a href="http://localhost:3348/#cb85-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Baseline_Accuracy =</span> <span class="fu">numeric</span>(),</span>
<span id="cb85-10"><a href="http://localhost:3348/#cb85-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb85-11"><a href="http://localhost:3348/#cb85-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb85-12"><a href="http://localhost:3348/#cb85-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-13"><a href="http://localhost:3348/#cb85-13" aria-hidden="true" tabindex="-1"></a><span class="co"># use random split</span></span>
<span id="cb85-14"><a href="http://localhost:3348/#cb85-14" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb85-15"><a href="http://localhost:3348/#cb85-15" aria-hidden="true" tabindex="-1"></a>train_idx <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(model3_data), <span class="at">size =</span> <span class="fu">floor</span>(<span class="fl">0.8</span> <span class="sc">*</span> <span class="fu">nrow</span>(model3_data)))</span>
<span id="cb85-16"><a href="http://localhost:3348/#cb85-16" aria-hidden="true" tabindex="-1"></a>train_data3_rand <span class="ot">&lt;-</span> model3_data[train_idx, ]</span>
<span id="cb85-17"><a href="http://localhost:3348/#cb85-17" aria-hidden="true" tabindex="-1"></a>test_data3_rand <span class="ot">&lt;-</span> model3_data[<span class="sc">-</span>train_idx, ]</span>
<span id="cb85-18"><a href="http://localhost:3348/#cb85-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-19"><a href="http://localhost:3348/#cb85-19" aria-hidden="true" tabindex="-1"></a><span class="co"># create consistent factor levels for Faculty</span></span>
<span id="cb85-20"><a href="http://localhost:3348/#cb85-20" aria-hidden="true" tabindex="-1"></a>all_faculty <span class="ot">&lt;-</span> <span class="fu">unique</span>(model3_data<span class="sc">$</span>Faculty)</span>
<span id="cb85-21"><a href="http://localhost:3348/#cb85-21" aria-hidden="true" tabindex="-1"></a>train_data3_rand<span class="sc">$</span>Faculty <span class="ot">&lt;-</span> <span class="fu">factor</span>(train_data3_rand<span class="sc">$</span>Faculty, <span class="at">levels =</span> all_faculty)</span>
<span id="cb85-22"><a href="http://localhost:3348/#cb85-22" aria-hidden="true" tabindex="-1"></a>test_data3_rand<span class="sc">$</span>Faculty <span class="ot">&lt;-</span> <span class="fu">factor</span>(test_data3_rand<span class="sc">$</span>Faculty, <span class="at">levels =</span> all_faculty)</span>
<span id="cb85-23"><a href="http://localhost:3348/#cb85-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-24"><a href="http://localhost:3348/#cb85-24" aria-hidden="true" tabindex="-1"></a><span class="co"># model each CRNA separately</span></span>
<span id="cb85-25"><a href="http://localhost:3348/#cb85-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">min</span>(<span class="dv">10</span>, <span class="fu">length</span>(top_crnas))) {</span>
<span id="cb85-26"><a href="http://localhost:3348/#cb85-26" aria-hidden="true" tabindex="-1"></a>  crna <span class="ot">&lt;-</span> top_crnas[i]</span>
<span id="cb85-27"><a href="http://localhost:3348/#cb85-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-28"><a href="http://localhost:3348/#cb85-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create binary target</span></span>
<span id="cb85-29"><a href="http://localhost:3348/#cb85-29" aria-hidden="true" tabindex="-1"></a>  train_target <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(train_data3_rand[[crna]] <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb85-30"><a href="http://localhost:3348/#cb85-30" aria-hidden="true" tabindex="-1"></a>  test_target <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(test_data3_rand[[crna]] <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb85-31"><a href="http://localhost:3348/#cb85-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-32"><a href="http://localhost:3348/#cb85-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># check class balance</span></span>
<span id="cb85-33"><a href="http://localhost:3348/#cb85-33" aria-hidden="true" tabindex="-1"></a>  train_positive <span class="ot">&lt;-</span> <span class="fu">sum</span>(train_target <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb85-34"><a href="http://localhost:3348/#cb85-34" aria-hidden="true" tabindex="-1"></a>  test_positive <span class="ot">&lt;-</span> <span class="fu">sum</span>(test_target <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb85-35"><a href="http://localhost:3348/#cb85-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-36"><a href="http://localhost:3348/#cb85-36" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (train_positive <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">|</span> test_positive <span class="sc">&lt;</span> <span class="dv">3</span>) {</span>
<span id="cb85-37"><a href="http://localhost:3348/#cb85-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span></span>
<span id="cb85-38"><a href="http://localhost:3348/#cb85-38" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb85-39"><a href="http://localhost:3348/#cb85-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-40"><a href="http://localhost:3348/#cb85-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># baseline accuracy</span></span>
<span id="cb85-41"><a href="http://localhost:3348/#cb85-41" aria-hidden="true" tabindex="-1"></a>  baseline_acc <span class="ot">&lt;-</span> <span class="fu">max</span>(<span class="fu">table</span>(test_target)) <span class="sc">/</span> <span class="fu">length</span>(test_target)</span>
<span id="cb85-42"><a href="http://localhost:3348/#cb85-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-43"><a href="http://localhost:3348/#cb85-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create model matrix for glmnet</span></span>
<span id="cb85-44"><a href="http://localhost:3348/#cb85-44" aria-hidden="true" tabindex="-1"></a>  train_x <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> Hist_Avg_CRNA <span class="sc">+</span> Faculty, </span>
<span id="cb85-45"><a href="http://localhost:3348/#cb85-45" aria-hidden="true" tabindex="-1"></a>                          <span class="at">data =</span> train_data3_rand)[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb85-46"><a href="http://localhost:3348/#cb85-46" aria-hidden="true" tabindex="-1"></a>  test_x <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> Hist_Avg_CRNA <span class="sc">+</span> Faculty, </span>
<span id="cb85-47"><a href="http://localhost:3348/#cb85-47" aria-hidden="true" tabindex="-1"></a>                         <span class="at">data =</span> test_data3_rand)[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb85-48"><a href="http://localhost:3348/#cb85-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-49"><a href="http://localhost:3348/#cb85-49" aria-hidden="true" tabindex="-1"></a>  train_y <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(train_target <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb85-50"><a href="http://localhost:3348/#cb85-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-51"><a href="http://localhost:3348/#cb85-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate class weights</span></span>
<span id="cb85-52"><a href="http://localhost:3348/#cb85-52" aria-hidden="true" tabindex="-1"></a>  weight_true <span class="ot">&lt;-</span> <span class="fu">sum</span>(train_target <span class="sc">==</span> <span class="cn">FALSE</span>) <span class="sc">/</span> <span class="fu">sum</span>(train_target <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb85-53"><a href="http://localhost:3348/#cb85-53" aria-hidden="true" tabindex="-1"></a>  weights <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(train_target <span class="sc">==</span> <span class="cn">TRUE</span>, weight_true, <span class="dv">1</span>)</span>
<span id="cb85-54"><a href="http://localhost:3348/#cb85-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-55"><a href="http://localhost:3348/#cb85-55" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ridge logistic regression with class weights</span></span>
<span id="cb85-56"><a href="http://localhost:3348/#cb85-56" aria-hidden="true" tabindex="-1"></a>  ridge_m3 <span class="ot">&lt;-</span> <span class="fu">glmnet</span>(train_x, train_y, <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">weights =</span> weights)</span>
<span id="cb85-57"><a href="http://localhost:3348/#cb85-57" aria-hidden="true" tabindex="-1"></a>  ridge_prob <span class="ot">&lt;-</span> <span class="fu">predict</span>(ridge_m3, <span class="at">newx =</span> test_x, <span class="at">s =</span> <span class="fl">0.01</span>, <span class="at">type =</span> <span class="st">"response"</span>)</span>
<span id="cb85-58"><a href="http://localhost:3348/#cb85-58" aria-hidden="true" tabindex="-1"></a>  ridge_pred <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">ifelse</span>(ridge_prob <span class="sc">&gt;</span> <span class="fl">0.3</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"FALSE"</span>, <span class="st">"TRUE"</span>))</span>
<span id="cb85-59"><a href="http://localhost:3348/#cb85-59" aria-hidden="true" tabindex="-1"></a>  ridge_acc <span class="ot">&lt;-</span> <span class="fu">mean</span>(ridge_pred <span class="sc">==</span> test_target)</span>
<span id="cb85-60"><a href="http://localhost:3348/#cb85-60" aria-hidden="true" tabindex="-1"></a>  ridge_sens <span class="ot">&lt;-</span> <span class="fu">sum</span>(ridge_pred <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">&amp;</span> test_target <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sum</span>(test_target <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb85-61"><a href="http://localhost:3348/#cb85-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-62"><a href="http://localhost:3348/#cb85-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># SVM with higher class weights</span></span>
<span id="cb85-63"><a href="http://localhost:3348/#cb85-63" aria-hidden="true" tabindex="-1"></a>  train_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb85-64"><a href="http://localhost:3348/#cb85-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">target =</span> train_target,</span>
<span id="cb85-65"><a href="http://localhost:3348/#cb85-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_CRNA_Count =</span> train_data3_rand<span class="sc">$</span>Avg_CRNA_Count,</span>
<span id="cb85-66"><a href="http://localhost:3348/#cb85-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_Room_Count =</span> train_data3_rand<span class="sc">$</span>Avg_Room_Count,</span>
<span id="cb85-67"><a href="http://localhost:3348/#cb85-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hist_Avg_CRNA =</span> train_data3_rand<span class="sc">$</span>Hist_Avg_CRNA,</span>
<span id="cb85-68"><a href="http://localhost:3348/#cb85-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">Faculty =</span> train_data3_rand<span class="sc">$</span>Faculty</span>
<span id="cb85-69"><a href="http://localhost:3348/#cb85-69" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb85-70"><a href="http://localhost:3348/#cb85-70" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-71"><a href="http://localhost:3348/#cb85-71" aria-hidden="true" tabindex="-1"></a>  test_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb85-72"><a href="http://localhost:3348/#cb85-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">target =</span> test_target,</span>
<span id="cb85-73"><a href="http://localhost:3348/#cb85-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_CRNA_Count =</span> test_data3_rand<span class="sc">$</span>Avg_CRNA_Count,</span>
<span id="cb85-74"><a href="http://localhost:3348/#cb85-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_Room_Count =</span> test_data3_rand<span class="sc">$</span>Avg_Room_Count,</span>
<span id="cb85-75"><a href="http://localhost:3348/#cb85-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hist_Avg_CRNA =</span> test_data3_rand<span class="sc">$</span>Hist_Avg_CRNA,</span>
<span id="cb85-76"><a href="http://localhost:3348/#cb85-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">Faculty =</span> test_data3_rand<span class="sc">$</span>Faculty</span>
<span id="cb85-77"><a href="http://localhost:3348/#cb85-77" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb85-78"><a href="http://localhost:3348/#cb85-78" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-79"><a href="http://localhost:3348/#cb85-79" aria-hidden="true" tabindex="-1"></a>  svm_m3 <span class="ot">&lt;-</span> <span class="fu">svm</span>(target <span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> Hist_Avg_CRNA <span class="sc">+</span> Faculty,</span>
<span id="cb85-80"><a href="http://localhost:3348/#cb85-80" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> train_df, <span class="at">kernel =</span> <span class="st">"radial"</span>, </span>
<span id="cb85-81"><a href="http://localhost:3348/#cb85-81" aria-hidden="true" tabindex="-1"></a>                <span class="at">class.weights =</span> <span class="fu">c</span>(<span class="st">"FALSE"</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">"TRUE"</span> <span class="ot">=</span> <span class="dv">20</span>))</span>
<span id="cb85-82"><a href="http://localhost:3348/#cb85-82" aria-hidden="true" tabindex="-1"></a>  svm_pred3 <span class="ot">&lt;-</span> <span class="fu">predict</span>(svm_m3, <span class="at">newdata =</span> test_df)</span>
<span id="cb85-83"><a href="http://localhost:3348/#cb85-83" aria-hidden="true" tabindex="-1"></a>  svm_acc <span class="ot">&lt;-</span> <span class="fu">mean</span>(svm_pred3 <span class="sc">==</span> test_target)</span>
<span id="cb85-84"><a href="http://localhost:3348/#cb85-84" aria-hidden="true" tabindex="-1"></a>  svm_sens <span class="ot">&lt;-</span> <span class="fu">sum</span>(svm_pred3 <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">&amp;</span> test_target <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sum</span>(test_target <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb85-85"><a href="http://localhost:3348/#cb85-85" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-86"><a href="http://localhost:3348/#cb85-86" aria-hidden="true" tabindex="-1"></a>  crna_results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(crna_results, <span class="fu">data.frame</span>(</span>
<span id="cb85-87"><a href="http://localhost:3348/#cb85-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">CRNA =</span> crna,</span>
<span id="cb85-88"><a href="http://localhost:3348/#cb85-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">Ridge_Accuracy =</span> <span class="fu">round</span>(ridge_acc, <span class="dv">4</span>),</span>
<span id="cb85-89"><a href="http://localhost:3348/#cb85-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">Ridge_Sensitivity =</span> <span class="fu">round</span>(ridge_sens, <span class="dv">4</span>),</span>
<span id="cb85-90"><a href="http://localhost:3348/#cb85-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">SVM_Accuracy =</span> <span class="fu">round</span>(svm_acc, <span class="dv">4</span>),</span>
<span id="cb85-91"><a href="http://localhost:3348/#cb85-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">SVM_Sensitivity =</span> <span class="fu">round</span>(svm_sens, <span class="dv">4</span>),</span>
<span id="cb85-92"><a href="http://localhost:3348/#cb85-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">Baseline_Accuracy =</span> <span class="fu">round</span>(baseline_acc, <span class="dv">4</span>)</span>
<span id="cb85-93"><a href="http://localhost:3348/#cb85-93" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb85-94"><a href="http://localhost:3348/#cb85-94" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb85-95"><a href="http://localhost:3348/#cb85-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-96"><a href="http://localhost:3348/#cb85-96" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(crna_results, </span>
<span id="cb85-97"><a href="http://localhost:3348/#cb85-97" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"CRNA"</span>, <span class="st">"Ridge Accuracy"</span>, <span class="st">"Ridge Sensitivity"</span>, </span>
<span id="cb85-98"><a href="http://localhost:3348/#cb85-98" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"SVM Accuracy"</span>, <span class="st">"SVM Sensitivity"</span>, <span class="st">"Baseline"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 18%">
<col style="width: 21%">
<col style="width: 15%">
<col style="width: 19%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">CRNA</th>
<th style="text-align: right;">Ridge Accuracy</th>
<th style="text-align: right;">Ridge Sensitivity</th>
<th style="text-align: right;">SVM Accuracy</th>
<th style="text-align: right;">SVM Sensitivity</th>
<th style="text-align: right;">Baseline</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CRNA_CRNA27</td>
<td style="text-align: right;">0.3906</td>
<td style="text-align: right;">0.8000</td>
<td style="text-align: right;">0.6566</td>
<td style="text-align: right;">0.7500</td>
<td style="text-align: right;">0.9623</td>
</tr>
<tr class="even">
<td style="text-align: left;">CRNA_CRNA50</td>
<td style="text-align: right;">0.3774</td>
<td style="text-align: right;">0.9048</td>
<td style="text-align: right;">0.6264</td>
<td style="text-align: right;">0.8571</td>
<td style="text-align: right;">0.9604</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CRNA_CRNA71</td>
<td style="text-align: right;">0.3868</td>
<td style="text-align: right;">0.9048</td>
<td style="text-align: right;">0.6660</td>
<td style="text-align: right;">0.6667</td>
<td style="text-align: right;">0.9604</td>
</tr>
<tr class="even">
<td style="text-align: left;">CRNA_CRNA70</td>
<td style="text-align: right;">0.3453</td>
<td style="text-align: right;">0.5789</td>
<td style="text-align: right;">0.5698</td>
<td style="text-align: right;">0.5263</td>
<td style="text-align: right;">0.9642</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CRNA_CRNA35</td>
<td style="text-align: right;">0.4075</td>
<td style="text-align: right;">0.7667</td>
<td style="text-align: right;">0.6811</td>
<td style="text-align: right;">0.6000</td>
<td style="text-align: right;">0.9434</td>
</tr>
<tr class="even">
<td style="text-align: left;">CRNA_CRNA82</td>
<td style="text-align: right;">0.4132</td>
<td style="text-align: right;">0.8400</td>
<td style="text-align: right;">0.7283</td>
<td style="text-align: right;">0.5600</td>
<td style="text-align: right;">0.9528</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CRNA_CRNA69</td>
<td style="text-align: right;">0.3736</td>
<td style="text-align: right;">0.7895</td>
<td style="text-align: right;">0.6887</td>
<td style="text-align: right;">0.4211</td>
<td style="text-align: right;">0.9642</td>
</tr>
<tr class="even">
<td style="text-align: left;">CRNA_CRNA30</td>
<td style="text-align: right;">0.4736</td>
<td style="text-align: right;">0.8750</td>
<td style="text-align: right;">0.6792</td>
<td style="text-align: right;">0.5625</td>
<td style="text-align: right;">0.9698</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CRNA_CRNAT</td>
<td style="text-align: right;">0.4566</td>
<td style="text-align: right;">0.9130</td>
<td style="text-align: right;">0.6698</td>
<td style="text-align: right;">0.6522</td>
<td style="text-align: right;">0.9566</td>
</tr>
<tr class="even">
<td style="text-align: left;">CRNA_CRNA43</td>
<td style="text-align: right;">0.3698</td>
<td style="text-align: right;">0.8947</td>
<td style="text-align: right;">0.7868</td>
<td style="text-align: right;">0.5263</td>
<td style="text-align: right;">0.9642</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="http://localhost:3348/#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pick one CRNA to demonstrate predictions</span></span>
<span id="cb86-2"><a href="http://localhost:3348/#cb86-2" aria-hidden="true" tabindex="-1"></a>demo_crna <span class="ot">&lt;-</span> top_crnas[<span class="dv">1</span>]  <span class="co"># CRNA_CRNA27</span></span>
<span id="cb86-3"><a href="http://localhost:3348/#cb86-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-4"><a href="http://localhost:3348/#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="co"># get the predictions from the last model run (or rerun for this CRNA)</span></span>
<span id="cb86-5"><a href="http://localhost:3348/#cb86-5" aria-hidden="true" tabindex="-1"></a>train_target <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(train_data3_rand[[demo_crna]] <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb86-6"><a href="http://localhost:3348/#cb86-6" aria-hidden="true" tabindex="-1"></a>test_target <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(test_data3_rand[[demo_crna]] <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb86-7"><a href="http://localhost:3348/#cb86-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-8"><a href="http://localhost:3348/#cb86-8" aria-hidden="true" tabindex="-1"></a>train_x <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> Hist_Avg_CRNA <span class="sc">+</span> Faculty, </span>
<span id="cb86-9"><a href="http://localhost:3348/#cb86-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">data =</span> train_data3_rand)[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb86-10"><a href="http://localhost:3348/#cb86-10" aria-hidden="true" tabindex="-1"></a>test_x <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> Avg_CRNA_Count <span class="sc">+</span> Avg_Room_Count <span class="sc">+</span> Hist_Avg_CRNA <span class="sc">+</span> Faculty, </span>
<span id="cb86-11"><a href="http://localhost:3348/#cb86-11" aria-hidden="true" tabindex="-1"></a>                       <span class="at">data =</span> test_data3_rand)[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb86-12"><a href="http://localhost:3348/#cb86-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-13"><a href="http://localhost:3348/#cb86-13" aria-hidden="true" tabindex="-1"></a>train_y <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(train_target <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb86-14"><a href="http://localhost:3348/#cb86-14" aria-hidden="true" tabindex="-1"></a>weight_true <span class="ot">&lt;-</span> <span class="fu">sum</span>(train_target <span class="sc">==</span> <span class="cn">FALSE</span>) <span class="sc">/</span> <span class="fu">sum</span>(train_target <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb86-15"><a href="http://localhost:3348/#cb86-15" aria-hidden="true" tabindex="-1"></a>weights <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(train_target <span class="sc">==</span> <span class="cn">TRUE</span>, weight_true, <span class="dv">1</span>)</span>
<span id="cb86-16"><a href="http://localhost:3348/#cb86-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-17"><a href="http://localhost:3348/#cb86-17" aria-hidden="true" tabindex="-1"></a>ridge_m3 <span class="ot">&lt;-</span> <span class="fu">glmnet</span>(train_x, train_y, <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">weights =</span> weights)</span>
<span id="cb86-18"><a href="http://localhost:3348/#cb86-18" aria-hidden="true" tabindex="-1"></a>ridge_prob <span class="ot">&lt;-</span> <span class="fu">predict</span>(ridge_m3, <span class="at">newx =</span> test_x, <span class="at">s =</span> <span class="fl">0.01</span>, <span class="at">type =</span> <span class="st">"response"</span>)</span>
<span id="cb86-19"><a href="http://localhost:3348/#cb86-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-20"><a href="http://localhost:3348/#cb86-20" aria-hidden="true" tabindex="-1"></a><span class="co"># create results dataframe</span></span>
<span id="cb86-21"><a href="http://localhost:3348/#cb86-21" aria-hidden="true" tabindex="-1"></a>prediction_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb86-22"><a href="http://localhost:3348/#cb86-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">Faculty =</span> test_data3_rand<span class="sc">$</span>Faculty,</span>
<span id="cb86-23"><a href="http://localhost:3348/#cb86-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">Actual =</span> test_target <span class="sc">==</span> <span class="cn">TRUE</span>,</span>
<span id="cb86-24"><a href="http://localhost:3348/#cb86-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">Predicted_Prob =</span> <span class="fu">as.numeric</span>(ridge_prob),</span>
<span id="cb86-25"><a href="http://localhost:3348/#cb86-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">Predicted =</span> <span class="fu">as.numeric</span>(ridge_prob) <span class="sc">&gt;</span> <span class="fl">0.3</span></span>
<span id="cb86-26"><a href="http://localhost:3348/#cb86-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb86-27"><a href="http://localhost:3348/#cb86-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-28"><a href="http://localhost:3348/#cb86-28" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize by faculty - who does the model predict will work with this CRNA?</span></span>
<span id="cb86-29"><a href="http://localhost:3348/#cb86-29" aria-hidden="true" tabindex="-1"></a>faculty_predictions <span class="ot">&lt;-</span> prediction_results <span class="sc">%&gt;%</span></span>
<span id="cb86-30"><a href="http://localhost:3348/#cb86-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Faculty) <span class="sc">%&gt;%</span></span>
<span id="cb86-31"><a href="http://localhost:3348/#cb86-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb86-32"><a href="http://localhost:3348/#cb86-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Shifts =</span> <span class="fu">n</span>(),</span>
<span id="cb86-33"><a href="http://localhost:3348/#cb86-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">Actual_Pairings =</span> <span class="fu">sum</span>(Actual),</span>
<span id="cb86-34"><a href="http://localhost:3348/#cb86-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">Actual_Rate =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Actual) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>),</span>
<span id="cb86-35"><a href="http://localhost:3348/#cb86-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">Predicted_Pairings =</span> <span class="fu">sum</span>(Predicted),</span>
<span id="cb86-36"><a href="http://localhost:3348/#cb86-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">Predicted_Rate =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Predicted) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>),</span>
<span id="cb86-37"><a href="http://localhost:3348/#cb86-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_Probability =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Predicted_Prob) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)</span>
<span id="cb86-38"><a href="http://localhost:3348/#cb86-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb86-39"><a href="http://localhost:3348/#cb86-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Total_Shifts <span class="sc">&gt;=</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb86-40"><a href="http://localhost:3348/#cb86-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Avg_Probability)) <span class="sc">%&gt;%</span></span>
<span id="cb86-41"><a href="http://localhost:3348/#cb86-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>)</span>
<span id="cb86-42"><a href="http://localhost:3348/#cb86-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-43"><a href="http://localhost:3348/#cb86-43" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Predictions for"</span>, demo_crna, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Predictions for CRNA_CRNA27 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="http://localhost:3348/#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(faculty_predictions,</span>
<span id="cb88-2"><a href="http://localhost:3348/#cb88-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Faculty"</span>, <span class="st">"Shifts"</span>, <span class="st">"Actual Pairings"</span>, <span class="st">"Actual %"</span>, </span>
<span id="cb88-3"><a href="http://localhost:3348/#cb88-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Predicted Pairings"</span>, <span class="st">"Predicted %"</span>, <span class="st">"Avg Prob %"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 19%">
<col style="width: 10%">
<col style="width: 22%">
<col style="width: 14%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Faculty</th>
<th style="text-align: right;">Shifts</th>
<th style="text-align: right;">Actual Pairings</th>
<th style="text-align: right;">Actual %</th>
<th style="text-align: right;">Predicted Pairings</th>
<th style="text-align: right;">Predicted %</th>
<th style="text-align: right;">Avg Prob %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Faculty32</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">79.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty51</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.1</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">77.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyC</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">74.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty47</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">14.3</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">72.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyJ</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.8</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">71.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty50</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4.2</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">69.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyX</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">16.7</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">69.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">FacultyN</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">28.6</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">60.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyD</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">59.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">FacultyR</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">55.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyT</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">53.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">FacultyL</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">53.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyU</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">11.8</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">51.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty52</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">50.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyI</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.7</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">47.1</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="http://localhost:3348/#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize by faculty</span></span>
<span id="cb89-2"><a href="http://localhost:3348/#cb89-2" aria-hidden="true" tabindex="-1"></a>faculty_predictions <span class="ot">&lt;-</span> prediction_results <span class="sc">%&gt;%</span></span>
<span id="cb89-3"><a href="http://localhost:3348/#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Faculty) <span class="sc">%&gt;%</span></span>
<span id="cb89-4"><a href="http://localhost:3348/#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb89-5"><a href="http://localhost:3348/#cb89-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Shifts =</span> <span class="fu">n</span>(),</span>
<span id="cb89-6"><a href="http://localhost:3348/#cb89-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Actual_Pairings =</span> <span class="fu">sum</span>(Actual),</span>
<span id="cb89-7"><a href="http://localhost:3348/#cb89-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Actual_Rate =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Actual) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>),</span>
<span id="cb89-8"><a href="http://localhost:3348/#cb89-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Avg_Probability =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Predicted_Prob) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)</span>
<span id="cb89-9"><a href="http://localhost:3348/#cb89-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb89-10"><a href="http://localhost:3348/#cb89-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Total_Shifts <span class="sc">&gt;=</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-11"><a href="http://localhost:3348/#cb89-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Avg_Probability))</span>
<span id="cb89-12"><a href="http://localhost:3348/#cb89-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-13"><a href="http://localhost:3348/#cb89-13" aria-hidden="true" tabindex="-1"></a><span class="co"># show top 10 predicted</span></span>
<span id="cb89-14"><a href="http://localhost:3348/#cb89-14" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Top 10 Faculty predicted to work with"</span>, demo_crna, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Top 10 Faculty predicted to work with CRNA_CRNA27 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="http://localhost:3348/#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(faculty_predictions, <span class="dv">10</span>),</span>
<span id="cb91-2"><a href="http://localhost:3348/#cb91-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Faculty"</span>, <span class="st">"Shifts"</span>, <span class="st">"Actual Pairings"</span>, <span class="st">"Actual %"</span>, <span class="st">"Model Prob %"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Faculty</th>
<th style="text-align: right;">Shifts</th>
<th style="text-align: right;">Actual Pairings</th>
<th style="text-align: right;">Actual %</th>
<th style="text-align: right;">Model Prob %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Faculty32</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">79.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty51</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.1</td>
<td style="text-align: right;">77.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyC</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">74.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty47</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">14.3</td>
<td style="text-align: right;">72.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyJ</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.8</td>
<td style="text-align: right;">71.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty50</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4.2</td>
<td style="text-align: right;">69.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyX</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">16.7</td>
<td style="text-align: right;">69.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">FacultyN</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">28.6</td>
<td style="text-align: right;">60.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyD</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: right;">59.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">FacultyR</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">55.9</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="http://localhost:3348/#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># show bottom 10 predicted  </span></span>
<span id="cb92-2"><a href="http://localhost:3348/#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Bottom 10 Faculty predicted to work with"</span>, demo_crna, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Bottom 10 Faculty predicted to work with CRNA_CRNA27 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="http://localhost:3348/#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">tail</span>(faculty_predictions, <span class="dv">10</span>),</span>
<span id="cb94-2"><a href="http://localhost:3348/#cb94-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Faculty"</span>, <span class="st">"Shifts"</span>, <span class="st">"Actual Pairings"</span>, <span class="st">"Actual %"</span>, <span class="st">"Model Prob %"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Faculty</th>
<th style="text-align: right;">Shifts</th>
<th style="text-align: right;">Actual Pairings</th>
<th style="text-align: right;">Actual %</th>
<th style="text-align: right;">Model Prob %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Faculty42</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.1</td>
<td style="text-align: right;">21.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">FacultyQ</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">19.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Faculty48</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">4.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty37</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">3.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FacultyO</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">3.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty45</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">13.3</td>
<td style="text-align: right;">3.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Faculty36</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">2.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty49</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">2.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Faculty44</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">2.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">FacultyB</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">2.7</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="http://localhost:3348/#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># show the pairings</span></span>
<span id="cb95-2"><a href="http://localhost:3348/#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plot predicted probability vs actual rate</span></span>
<span id="cb95-3"><a href="http://localhost:3348/#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(faculty_predictions, <span class="fu">aes</span>(<span class="at">x =</span> Actual_Rate, <span class="at">y =</span> Avg_Probability)) <span class="sc">+</span></span>
<span id="cb95-4"><a href="http://localhost:3348/#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"#3b528b"</span>) <span class="sc">+</span></span>
<span id="cb95-5"><a href="http://localhost:3348/#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">1</span>, <span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb95-6"><a href="http://localhost:3348/#cb95-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Faculty), <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb95-7"><a href="http://localhost:3348/#cb95-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Predicted vs Actual Pairing Rate for"</span>, demo_crna),</span>
<span id="cb95-8"><a href="http://localhost:3348/#cb95-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Actual Pairing Rate (%)"</span>,</span>
<span id="cb95-9"><a href="http://localhost:3348/#cb95-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Model Predicted Probability (%)"</span>) <span class="sc">+</span></span>
<span id="cb95-10"><a href="http://localhost:3348/#cb95-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">100</span>) <span class="sc">+</span></span>
<span id="cb95-11"><a href="http://localhost:3348/#cb95-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Faculty Scheduling Predicting Staffing Preferences_files/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="summary-and-recommendations" class="level1">
<h1>Summary and Recommendations</h1>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="http://localhost:3348/#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># average performance</span></span>
<span id="cb96-2"><a href="http://localhost:3348/#cb96-2" aria-hidden="true" tabindex="-1"></a>avg_ridge_acc <span class="ot">&lt;-</span> <span class="fu">mean</span>(crna_results<span class="sc">$</span>Ridge_Accuracy)</span>
<span id="cb96-3"><a href="http://localhost:3348/#cb96-3" aria-hidden="true" tabindex="-1"></a>avg_ridge_sens <span class="ot">&lt;-</span> <span class="fu">mean</span>(crna_results<span class="sc">$</span>Ridge_Sensitivity)</span>
<span id="cb96-4"><a href="http://localhost:3348/#cb96-4" aria-hidden="true" tabindex="-1"></a>avg_svm_acc <span class="ot">&lt;-</span> <span class="fu">mean</span>(crna_results<span class="sc">$</span>SVM_Accuracy)</span>
<span id="cb96-5"><a href="http://localhost:3348/#cb96-5" aria-hidden="true" tabindex="-1"></a>avg_svm_sens <span class="ot">&lt;-</span> <span class="fu">mean</span>(crna_results<span class="sc">$</span>SVM_Sensitivity)</span>
<span id="cb96-6"><a href="http://localhost:3348/#cb96-6" aria-hidden="true" tabindex="-1"></a>avg_baseline <span class="ot">&lt;-</span> <span class="fu">mean</span>(crna_results<span class="sc">$</span>Baseline_Accuracy)</span>
<span id="cb96-7"><a href="http://localhost:3348/#cb96-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-8"><a href="http://localhost:3348/#cb96-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Average Ridge Accuracy:"</span>, <span class="fu">round</span>(avg_ridge_acc, <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Average Ridge Accuracy: 0.3994 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="http://localhost:3348/#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Average Ridge Sensitivity:"</span>, <span class="fu">round</span>(avg_ridge_sens, <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Average Ridge Sensitivity: 0.8267 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="http://localhost:3348/#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Average SVM Accuracy:"</span>, <span class="fu">round</span>(avg_svm_acc, <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Average SVM Accuracy: 0.6753 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="http://localhost:3348/#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Average SVM Sensitivity:"</span>, <span class="fu">round</span>(avg_svm_sens, <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Average SVM Sensitivity: 0.6122 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="http://localhost:3348/#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Average Baseline Accuracy:"</span>, <span class="fu">round</span>(avg_baseline, <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Average Baseline Accuracy: 0.9598 </code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->





<script>
  window.backupDefine = window.define;
  window.define = undefined;
</script>
<script type="text/javascript" src="./Faculty Scheduling Predicting Staffing Preferences_files/quarto-preview.js.download"></script>
<script>
  window.define = window.backupDefine;
  window.backupDefine = undefined;
</script>
<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    window.QuartoPreview.init({
      origin: "",
      search: "",
      inputFile: "C:\Users\lizob\Documents\UTSA\applications\project\Individual Project\UT_Faculty_Scheduling_Analysis.qmd",
      isPresentation: false
    });
  })
</script>
<div><div dir="ltr" class="fui-FluentProvider fui-FluentProviderr0 ___jdtuxv0 f19n0e5 fxugw4r f1o700av fk6fouc fkhj508 figsok6 f1i3iumi"></div></div><i tabindex="-1" role="none" data-tabster-dummy="" aria-hidden="true" style="position: fixed; height: 1px; width: 1px; opacity: 0.001; z-index: -1; content-visibility: hidden; top: 0px; left: 0px;"></i></body></html>